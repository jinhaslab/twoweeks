<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 12 Other visulization example | DsPubs with R tutor book</title>
  <meta name="description" content="Chapter 12 Other visulization example | DsPubs with R tutor book" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 12 Other visulization example | DsPubs with R tutor book" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 12 Other visulization example | DsPubs with R tutor book" />
  
  
  

<meta name="author" content="jinha" />


<meta name="date" content="2022-11-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="statistical-plot-with-ggplot2.html"/>
<link rel="next" href="data-wrangling--reshaping.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.23/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://dspubs.org/webapps">DsPubs</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="lets-start-with-r-and-r-studio.html"><a href="lets-start-with-r-and-r-studio.html"><i class="fa fa-check"></i><b>2</b> Let’s Start with R and R studio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="lets-start-with-r-and-r-studio.html"><a href="lets-start-with-r-and-r-studio.html#rstudio-cloud-and-colab"><i class="fa fa-check"></i><b>2.1</b> Rstudio Cloud, and colab</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="lets-start-with-r-and-r-studio.html"><a href="lets-start-with-r-and-r-studio.html#rstudio-cloud"><i class="fa fa-check"></i><b>2.1.1</b> Rstudio Cloud</a></li>
<li class="chapter" data-level="2.1.2" data-path="lets-start-with-r-and-r-studio.html"><a href="lets-start-with-r-and-r-studio.html#colab"><i class="fa fa-check"></i><b>2.1.2</b> Colab</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="lets-start-with-r-and-r-studio.html"><a href="lets-start-with-r-and-r-studio.html#r-and-r-studio-on-window-system"><i class="fa fa-check"></i><b>2.2</b> R and R studio on Window system</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="lets-start-with-r-and-r-studio.html"><a href="lets-start-with-r-and-r-studio.html#r-studio-install"><i class="fa fa-check"></i><b>2.2.1</b> R studio install</a></li>
<li class="chapter" data-level="2.2.2" data-path="lets-start-with-r-and-r-studio.html"><a href="lets-start-with-r-and-r-studio.html#r-studio-project"><i class="fa fa-check"></i><b>2.2.2</b> R studio project</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="lets-start-with-r-and-r-studio.html"><a href="lets-start-with-r-and-r-studio.html#r-and-r-studio-on-ubuntus"><i class="fa fa-check"></i><b>2.3</b> R and R studio on Ubuntus</a></li>
</ul></li>
<li class="part"><span><b>I R</b></span></li>
<li class="chapter" data-level="3" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>3</b> R basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-basics.html"><a href="r-basics.html#vector-matirx-list"><i class="fa fa-check"></i><b>3.1</b> vector matirx list</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="r-basics.html"><a href="r-basics.html#오브젝트-objects"><i class="fa fa-check"></i><b>3.1.1</b> 오브젝트 (objects)</a></li>
<li class="chapter" data-level="3.1.2" data-path="r-basics.html"><a href="r-basics.html#백터-vectors-팩터-factors"><i class="fa fa-check"></i><b>3.1.2</b> 백터 (Vectors), 팩터 (factors)</a></li>
<li class="chapter" data-level="3.1.3" data-path="r-basics.html"><a href="r-basics.html#매트릭스-matrix-데이터프래임-data-frame-리스트-list"><i class="fa fa-check"></i><b>3.1.3</b> 매트릭스 (Matrix), 데이터프래임 (data frame), 리스트 (list)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="r-basics.html"><a href="r-basics.html#데이터-생성-저장"><i class="fa fa-check"></i><b>3.2</b> 데이터 생성 저장</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="r-basics.html"><a href="r-basics.html#built-in-data-sets"><i class="fa fa-check"></i><b>3.2.1</b> built-in data sets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r-program-basic.html"><a href="r-program-basic.html"><i class="fa fa-check"></i><b>4</b> R program basic</a>
<ul>
<li class="chapter" data-level="4.1" data-path="r-program-basic.html"><a href="r-program-basic.html#기초-연산"><i class="fa fa-check"></i><b>4.1</b> 기초 연산</a></li>
<li class="chapter" data-level="4.2" data-path="r-program-basic.html"><a href="r-program-basic.html#조건부-연산"><i class="fa fa-check"></i><b>4.2</b> 조건부 연산</a></li>
<li class="chapter" data-level="4.3" data-path="r-program-basic.html"><a href="r-program-basic.html#함수-만들기"><i class="fa fa-check"></i><b>4.3</b> 함수 만들기</a></li>
<li class="chapter" data-level="4.4" data-path="r-program-basic.html"><a href="r-program-basic.html#반복문-vectorization-functionals"><i class="fa fa-check"></i><b>4.4</b> 반복문, vectorization, functionals</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="r-program-basic.html"><a href="r-program-basic.html#for-loop"><i class="fa fa-check"></i><b>4.4.1</b> for loop</a></li>
<li class="chapter" data-level="4.4.2" data-path="r-program-basic.html"><a href="r-program-basic.html#vectorization-과-apply-구문"><i class="fa fa-check"></i><b>4.4.2</b> vectorization 과 apply 구문</a></li>
<li class="chapter" data-level="4.4.3" data-path="r-program-basic.html"><a href="r-program-basic.html#home-work-and-summary-function"><i class="fa fa-check"></i><b>4.4.3</b> home work and summary function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>5</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-manipulation.html"><a href="data-manipulation.html#dplyr-tidyverse"><i class="fa fa-check"></i><b>5.1</b> dplyr (tidyverse)</a></li>
<li class="chapter" data-level="5.2" data-path="data-manipulation.html"><a href="data-manipulation.html#실습-데이터-준비"><i class="fa fa-check"></i><b>5.2</b> 실습 데이터 준비</a></li>
<li class="chapter" data-level="5.3" data-path="data-manipulation.html"><a href="data-manipulation.html#select"><i class="fa fa-check"></i><b>5.3</b> select</a></li>
<li class="chapter" data-level="5.4" data-path="data-manipulation.html"><a href="data-manipulation.html#filter"><i class="fa fa-check"></i><b>5.4</b> filter</a></li>
<li class="chapter" data-level="5.5" data-path="data-manipulation.html"><a href="data-manipulation.html#arrange"><i class="fa fa-check"></i><b>5.5</b> arrange</a></li>
<li class="chapter" data-level="5.6" data-path="data-manipulation.html"><a href="data-manipulation.html#mutate"><i class="fa fa-check"></i><b>5.6</b> mutate</a></li>
<li class="chapter" data-level="5.7" data-path="data-manipulation.html"><a href="data-manipulation.html#group_by"><i class="fa fa-check"></i><b>5.7</b> group_by</a></li>
<li class="chapter" data-level="5.8" data-path="data-manipulation.html"><a href="data-manipulation.html#merge-join"><i class="fa fa-check"></i><b>5.8</b> merge, join</a></li>
</ul></li>
<li class="part"><span><b>II Visualization</b></span></li>
<li class="chapter" data-level="6" data-path="tables-for-public-health-1.html"><a href="tables-for-public-health-1.html"><i class="fa fa-check"></i><b>6</b> Tables for public health 1</a>
<ul>
<li class="chapter" data-level="6.1" data-path="tables-for-public-health-1.html"><a href="tables-for-public-health-1.html#데이터표-준비"><i class="fa fa-check"></i><b>6.1</b> 데이터표 준비</a></li>
<li class="chapter" data-level="6.2" data-path="tables-for-public-health-1.html"><a href="tables-for-public-health-1.html#central-tendency-mean-median-mode"><i class="fa fa-check"></i><b>6.2</b> Central Tendency (mean, median, mode)</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="tables-for-public-health-1.html"><a href="tables-for-public-health-1.html#하나씩-반복"><i class="fa fa-check"></i><b>6.2.1</b> 하나씩 반복</a></li>
<li class="chapter" data-level="6.2.2" data-path="tables-for-public-health-1.html"><a href="tables-for-public-health-1.html#group_by-summary-and-table-1"><i class="fa fa-check"></i><b>6.2.2</b> Group_by summary and Table 1</a></li>
<li class="chapter" data-level="6.2.3" data-path="tables-for-public-health-1.html"><a href="tables-for-public-health-1.html#long-file-and-table-1"><i class="fa fa-check"></i><b>6.2.3</b> Long File and Table 1</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="tables-for-public-health-1.html"><a href="tables-for-public-health-1.html#count-and-distribution"><i class="fa fa-check"></i><b>6.3</b> Count and Distribution</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="tables-for-public-health-1.html"><a href="tables-for-public-health-1.html#하나씩-반복-1"><i class="fa fa-check"></i><b>6.3.1</b> 하나씩 반복</a></li>
<li class="chapter" data-level="6.3.2" data-path="tables-for-public-health-1.html"><a href="tables-for-public-health-1.html#group_by-summary-and-table-1-1"><i class="fa fa-check"></i><b>6.3.2</b> Group_by summary and Table 1</a></li>
<li class="chapter" data-level="6.3.3" data-path="tables-for-public-health-1.html"><a href="tables-for-public-health-1.html#long-file-and-table-1-1"><i class="fa fa-check"></i><b>6.3.3</b> Long File and Table 1</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="tables-for-public-health-1.html"><a href="tables-for-public-health-1.html#정리-1"><i class="fa fa-check"></i><b>6.4</b> 정리 1</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="tables-for-public-health-1.html"><a href="tables-for-public-health-1.html#과제"><i class="fa fa-check"></i><b>6.4.1</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Tables2.html"><a href="Tables2.html"><i class="fa fa-check"></i><b>7</b> Tables for public health 2</a>
<ul>
<li class="chapter" data-level="7.1" data-path="Tables2.html"><a href="Tables2.html#데이터-준비"><i class="fa fa-check"></i><b>7.1</b> 데이터 준비</a></li>
<li class="chapter" data-level="7.2" data-path="Tables2.html"><a href="Tables2.html#분석-주제-선정"><i class="fa fa-check"></i><b>7.2</b> 분석 주제 선정</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="Tables2.html"><a href="Tables2.html#근로환경조사와-recode-선택사항"><i class="fa fa-check"></i><b>7.2.1</b> 근로환경조사와 recode (선택사항)</a></li>
<li class="chapter" data-level="7.2.2" data-path="Tables2.html"><a href="Tables2.html#근로환경조사-기본-변수-생성"><i class="fa fa-check"></i><b>7.2.2</b> 근로환경조사 기본 변수 생성</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="Tables2.html"><a href="Tables2.html#근로환경조사-table-1-만들기"><i class="fa fa-check"></i><b>7.3</b> 근로환경조사 Table 1 만들기</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="Tables2.html"><a href="Tables2.html#변수-값-요약하기"><i class="fa fa-check"></i><b>7.3.1</b> 변수 값 요약하기</a></li>
<li class="chapter" data-level="7.3.2" data-path="Tables2.html"><a href="Tables2.html#p-value-구하기."><i class="fa fa-check"></i><b>7.3.2</b> P value 구하기.</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="Tables2.html"><a href="Tables2.html#table-1-정리하기"><i class="fa fa-check"></i><b>7.4</b> Table 1 정리하기</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="Tables2.html"><a href="Tables2.html#htmltable-visulaization"><i class="fa fa-check"></i><b>7.4.1</b> htmlTable visulaization</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="Tables2.html"><a href="Tables2.html#kwcsfunction"><i class="fa fa-check"></i><b>7.5</b> 함수만들기</a></li>
<li class="chapter" data-level="7.6" data-path="Tables2.html"><a href="Tables2.html#quiz"><i class="fa fa-check"></i><b>7.6</b> Quiz</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="Tables2.html"><a href="Tables2.html#quiz1"><i class="fa fa-check"></i><b>7.6.1</b> Quiz1</a></li>
<li class="chapter" data-level="7.6.2" data-path="Tables2.html"><a href="Tables2.html#quiz-2"><i class="fa fa-check"></i><b>7.6.2</b> Quiz 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tables-for-public-health-3.html"><a href="tables-for-public-health-3.html"><i class="fa fa-check"></i><b>8</b> Tables for public health 3</a>
<ul>
<li class="chapter" data-level="8.1" data-path="tables-for-public-health-3.html"><a href="tables-for-public-health-3.html#데이터-준비-1"><i class="fa fa-check"></i><b>8.1</b> 데이터 준비</a></li>
<li class="chapter" data-level="8.2" data-path="tables-for-public-health-3.html"><a href="tables-for-public-health-3.html#분석-주제-선정-1"><i class="fa fa-check"></i><b>8.2</b> 분석 주제 선정</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="tables-for-public-health-3.html"><a href="tables-for-public-health-3.html#근로환경조사-기본-변수-생성-선택"><i class="fa fa-check"></i><b>8.2.1</b> 근로환경조사 기본 변수 생성 (선택)</a></li>
<li class="chapter" data-level="8.2.2" data-path="tables-for-public-health-3.html"><a href="tables-for-public-health-3.html#함수를-source-file-로-저장하기"><i class="fa fa-check"></i><b>8.2.2</b> 함수를 source file 로 저장하기</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="tables-for-public-health-3.html"><a href="tables-for-public-health-3.html#logistic-regression-table"><i class="fa fa-check"></i><b>8.3</b> Logistic Regression Table</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="tables-for-public-health-3.html"><a href="tables-for-public-health-3.html#로지스틱회귀분석-표-함수-1"><i class="fa fa-check"></i><b>8.3.1</b> 로지스틱회귀분석 표 함수 1</a></li>
<li class="chapter" data-level="8.3.2" data-path="tables-for-public-health-3.html"><a href="tables-for-public-health-3.html#로지스틱-회귀분석-표-2"><i class="fa fa-check"></i><b>8.3.2</b> 로지스틱 회귀분석 표 2</a></li>
<li class="chapter" data-level="8.3.3" data-path="tables-for-public-health-3.html"><a href="tables-for-public-health-3.html#로지스틱-회귀분석-3"><i class="fa fa-check"></i><b>8.3.3</b> 로지스틱 회귀분석 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tables-for-public-health-summary.html"><a href="tables-for-public-health-summary.html"><i class="fa fa-check"></i><b>9</b> Tables for public health summary</a>
<ul>
<li class="chapter" data-level="9.1" data-path="tables-for-public-health-summary.html"><a href="tables-for-public-health-summary.html#install-package-from-github"><i class="fa fa-check"></i><b>9.1</b> install package from github</a></li>
<li class="chapter" data-level="9.2" data-path="tables-for-public-health-summary.html"><a href="tables-for-public-health-summary.html#data-import-and-manipulation"><i class="fa fa-check"></i><b>9.2</b> data import and manipulation</a></li>
<li class="chapter" data-level="9.3" data-path="tables-for-public-health-summary.html"><a href="tables-for-public-health-summary.html#select-variables-and-table-1"><i class="fa fa-check"></i><b>9.3</b> select variables, and table 1</a></li>
<li class="chapter" data-level="9.4" data-path="tables-for-public-health-summary.html"><a href="tables-for-public-health-summary.html#logistic-regression-model-and-table-3"><i class="fa fa-check"></i><b>9.4</b> logistic regression model and table 3</a></li>
<li class="chapter" data-level="9.5" data-path="tables-for-public-health-summary.html"><a href="tables-for-public-health-summary.html#quiz-1"><i class="fa fa-check"></i><b>9.5</b> Quiz</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="tables-for-public-health-summary.html"><a href="tables-for-public-health-summary.html#install-and-load-library-tabf"><i class="fa fa-check"></i><b>9.5.1</b> install and load library tabf</a></li>
<li class="chapter" data-level="9.5.2" data-path="tables-for-public-health-summary.html"><a href="tables-for-public-health-summary.html#data-manipulation-1"><i class="fa fa-check"></i><b>9.5.2</b> data manipulation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html"><i class="fa fa-check"></i><b>10</b> Basic plot with R</a>
<ul>
<li class="chapter" data-level="10.1" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#ggplot-basic"><i class="fa fa-check"></i><b>10.1</b> ggplot basic</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#axis"><i class="fa fa-check"></i><b>10.1.1</b> axis</a></li>
<li class="chapter" data-level="10.1.2" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#layer-geom_x"><i class="fa fa-check"></i><b>10.1.2</b> layer, geom_x()</a></li>
<li class="chapter" data-level="10.1.3" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#geom_point"><i class="fa fa-check"></i><b>10.1.3</b> geom_point()</a></li>
<li class="chapter" data-level="10.1.4" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#geom_smooth"><i class="fa fa-check"></i><b>10.1.4</b> geom_smooth()</a></li>
<li class="chapter" data-level="10.1.5" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#faceting"><i class="fa fa-check"></i><b>10.1.5</b> faceting</a></li>
<li class="chapter" data-level="10.1.6" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#geom_bar"><i class="fa fa-check"></i><b>10.1.6</b> geom_bar()</a></li>
<li class="chapter" data-level="10.1.7" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#geom_density-geom_histogram"><i class="fa fa-check"></i><b>10.1.7</b> geom_density() , geom_histogram()</a></li>
<li class="chapter" data-level="10.1.8" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#geom_boxplot"><i class="fa fa-check"></i><b>10.1.8</b> geom_boxplot()</a></li>
<li class="chapter" data-level="10.1.9" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#d-plot"><i class="fa fa-check"></i><b>10.1.9</b> 3d plot</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#visualzation-example-1"><i class="fa fa-check"></i><b>10.2</b> Visualzation example 1</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#simple-machine-learning-decision-tree"><i class="fa fa-check"></i><b>10.2.1</b> simple machine learning decision tree</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="basic-plot-with-r.html"><a href="basic-plot-with-r.html#summary"><i class="fa fa-check"></i><b>10.3</b> summary</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="statistical-plot-with-ggplot2.html"><a href="statistical-plot-with-ggplot2.html"><i class="fa fa-check"></i><b>11</b> Statistical Plot with ggplot2</a>
<ul>
<li class="chapter" data-level="11.1" data-path="statistical-plot-with-ggplot2.html"><a href="statistical-plot-with-ggplot2.html#prerequisite"><i class="fa fa-check"></i><b>11.1</b> Prerequisite</a></li>
<li class="chapter" data-level="11.2" data-path="statistical-plot-with-ggplot2.html"><a href="statistical-plot-with-ggplot2.html#t-test-and-chisq-test-visualization"><i class="fa fa-check"></i><b>11.2</b> T-test and Chisq-test Visualization</a></li>
<li class="chapter" data-level="11.3" data-path="statistical-plot-with-ggplot2.html"><a href="statistical-plot-with-ggplot2.html#odds-ratio-and-95-confidence-interval"><i class="fa fa-check"></i><b>11.3</b> Odds ratio and 95% confidence interval</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="other-visulization-example.html"><a href="other-visulization-example.html"><i class="fa fa-check"></i><b>12</b> Other visulization example</a>
<ul>
<li class="chapter" data-level="12.1" data-path="other-visulization-example.html"><a href="other-visulization-example.html#wave-form-data-visualization-example-for-public-health"><i class="fa fa-check"></i><b>12.1</b> wave form data visualization example for public health</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="other-visulization-example.html"><a href="other-visulization-example.html#data-visualization-example-eeg-data"><i class="fa fa-check"></i><b>12.1.1</b> Data Visualization example (EEG data)</a></li>
<li class="chapter" data-level="12.1.2" data-path="other-visulization-example.html"><a href="other-visulization-example.html#introduction-1"><i class="fa fa-check"></i><b>12.1.2</b> Introduction</a></li>
<li class="chapter" data-level="12.1.3" data-path="other-visulization-example.html"><a href="other-visulization-example.html#dataset-and-data-step"><i class="fa fa-check"></i><b>12.1.3</b> Dataset and Data step</a></li>
<li class="chapter" data-level="12.1.4" data-path="other-visulization-example.html"><a href="other-visulization-example.html#data-analysis"><i class="fa fa-check"></i><b>12.1.4</b> Data analysis</a></li>
<li class="chapter" data-level="12.1.5" data-path="other-visulization-example.html"><a href="other-visulization-example.html#decision-tree-simple"><i class="fa fa-check"></i><b>12.1.5</b> Decision Tree simple</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="other-visulization-example.html"><a href="other-visulization-example.html#mixed"><i class="fa fa-check"></i><b>12.2</b> Mixed Model</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="other-visulization-example.html"><a href="other-visulization-example.html#introduction-2"><i class="fa fa-check"></i><b>12.2.1</b> introduction</a></li>
<li class="chapter" data-level="12.2.2" data-path="other-visulization-example.html"><a href="other-visulization-example.html#data-step-1"><i class="fa fa-check"></i><b>12.2.2</b> data step 1</a></li>
<li class="chapter" data-level="12.2.3" data-path="other-visulization-example.html"><a href="other-visulization-example.html#load-data-of-int-and-korea"><i class="fa fa-check"></i><b>12.2.3</b> load data of Int and Korea</a></li>
<li class="chapter" data-level="12.2.4" data-path="other-visulization-example.html"><a href="other-visulization-example.html#data-merge"><i class="fa fa-check"></i><b>12.2.4</b> data merge</a></li>
<li class="chapter" data-level="12.2.5" data-path="other-visulization-example.html"><a href="other-visulization-example.html#data-analysis-start"><i class="fa fa-check"></i><b>12.2.5</b> Data analysis start</a></li>
<li class="chapter" data-level="12.2.6" data-path="other-visulization-example.html"><a href="other-visulization-example.html#job-loss-psychological-aggravation-according-to-education-level"><i class="fa fa-check"></i><b>12.2.6</b> job loss, psychological aggravation according to Education level</a></li>
<li class="chapter" data-level="12.2.7" data-path="other-visulization-example.html"><a href="other-visulization-example.html#association"><i class="fa fa-check"></i><b>12.2.7</b> association</a></li>
<li class="chapter" data-level="12.2.8" data-path="other-visulization-example.html"><a href="other-visulization-example.html#mixed-model"><i class="fa fa-check"></i><b>12.2.8</b> mixed model</a></li>
<li class="chapter" data-level="12.2.9" data-path="other-visulization-example.html"><a href="other-visulization-example.html#mixed-model-with-human-develop-index-stratification"><i class="fa fa-check"></i><b>12.2.9</b> mixed model with human develop index stratification</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="other-visulization-example.html"><a href="other-visulization-example.html#mixed"><i class="fa fa-check"></i><b>12.3</b> Mixed Model</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="other-visulization-example.html"><a href="other-visulization-example.html#introduction-3"><i class="fa fa-check"></i><b>12.3.1</b> introduction</a></li>
<li class="chapter" data-level="12.3.2" data-path="other-visulization-example.html"><a href="other-visulization-example.html#data-step-1-1"><i class="fa fa-check"></i><b>12.3.2</b> data step 1</a></li>
<li class="chapter" data-level="12.3.3" data-path="other-visulization-example.html"><a href="other-visulization-example.html#load-data-of-int-and-korea-1"><i class="fa fa-check"></i><b>12.3.3</b> load data of Int and Korea</a></li>
<li class="chapter" data-level="12.3.4" data-path="other-visulization-example.html"><a href="other-visulization-example.html#data-merge-1"><i class="fa fa-check"></i><b>12.3.4</b> data merge</a></li>
<li class="chapter" data-level="12.3.5" data-path="other-visulization-example.html"><a href="other-visulization-example.html#data-analysis-start-1"><i class="fa fa-check"></i><b>12.3.5</b> Data analysis start</a></li>
<li class="chapter" data-level="12.3.6" data-path="other-visulization-example.html"><a href="other-visulization-example.html#job-loss-psychological-aggravation-according-to-education-level-1"><i class="fa fa-check"></i><b>12.3.6</b> job loss, psychological aggravation according to Education level</a></li>
<li class="chapter" data-level="12.3.7" data-path="other-visulization-example.html"><a href="other-visulization-example.html#association-1"><i class="fa fa-check"></i><b>12.3.7</b> association</a></li>
<li class="chapter" data-level="12.3.8" data-path="other-visulization-example.html"><a href="other-visulization-example.html#mixed-model-1"><i class="fa fa-check"></i><b>12.3.8</b> mixed model</a></li>
<li class="chapter" data-level="12.3.9" data-path="other-visulization-example.html"><a href="other-visulization-example.html#mixed-model-with-human-develop-index-stratification-1"><i class="fa fa-check"></i><b>12.3.9</b> mixed model with human develop index stratification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="data-wrangling--reshaping.html"><a href="data-wrangling--reshaping.html"><i class="fa fa-check"></i><b>13</b> Data Wrangling- Reshaping</a>
<ul>
<li class="chapter" data-level="13.1" data-path="data-wrangling--reshaping.html"><a href="data-wrangling--reshaping.html#동영상"><i class="fa fa-check"></i><b>13.1</b> 동영상</a></li>
<li class="chapter" data-level="13.2" data-path="data-wrangling--reshaping.html"><a href="data-wrangling--reshaping.html#문제-제기"><i class="fa fa-check"></i><b>13.2</b> 문제 제기</a></li>
<li class="chapter" data-level="13.3" data-path="data-wrangling--reshaping.html"><a href="data-wrangling--reshaping.html#split"><i class="fa fa-check"></i><b>13.3</b> split</a></li>
<li class="chapter" data-level="13.4" data-path="data-wrangling--reshaping.html"><a href="data-wrangling--reshaping.html#gather-pivot_longer"><i class="fa fa-check"></i><b>13.4</b> gather (pivot_longer)</a></li>
<li class="chapter" data-level="13.5" data-path="data-wrangling--reshaping.html"><a href="data-wrangling--reshaping.html#spread-pivot_wider"><i class="fa fa-check"></i><b>13.5</b> spread (pivot_wider)</a></li>
<li class="chapter" data-level="13.6" data-path="data-wrangling--reshaping.html"><a href="data-wrangling--reshaping.html#stringr"><i class="fa fa-check"></i><b>13.6</b> stringr</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="data-wrangling--reshaping.html"><a href="data-wrangling--reshaping.html#분진-노출자-찾기"><i class="fa fa-check"></i><b>13.6.1</b> 분진 노출자 찾기</a></li>
<li class="chapter" data-level="13.6.2" data-path="data-wrangling--reshaping.html"><a href="data-wrangling--reshaping.html#특정-문자-변환"><i class="fa fa-check"></i><b>13.6.2</b> 특정 문자 변환</a></li>
<li class="chapter" data-level="13.6.3" data-path="data-wrangling--reshaping.html"><a href="data-wrangling--reshaping.html#과제-1"><i class="fa fa-check"></i><b>13.6.3</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="web-scraping.html"><a href="web-scraping.html"><i class="fa fa-check"></i><b>14</b> Web Scraping</a>
<ul>
<li class="chapter" data-level="14.1" data-path="web-scraping.html"><a href="web-scraping.html#issue-of-covid19-in-korea"><i class="fa fa-check"></i><b>14.1</b> issue of COVID19 in Korea</a></li>
<li class="chapter" data-level="14.2" data-path="web-scraping.html"><a href="web-scraping.html#homework"><i class="fa fa-check"></i><b>14.2</b> homework</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="web-scraping.html"><a href="web-scraping.html#download-cumulative-covid19-death"><i class="fa fa-check"></i><b>14.2.1</b> download Cumulative covid19 death</a></li>
<li class="chapter" data-level="14.2.2" data-path="web-scraping.html"><a href="web-scraping.html#uk-italy-france-spain-usa-canada"><i class="fa fa-check"></i><b>14.2.2</b> UK, Italy, France, Spain, USA, Canada</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="web-scraping.html"><a href="web-scraping.html#review-of-title-from-google-scholar"><i class="fa fa-check"></i><b>14.3</b> Review of title from google scholar</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="web-scraping.html"><a href="web-scraping.html#googl-scholar"><i class="fa fa-check"></i><b>14.3.1</b> googl scholar</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="web-scraping.html"><a href="web-scraping.html#home-work-2"><i class="fa fa-check"></i><b>14.4</b> home work 2</a></li>
<li class="chapter" data-level="14.5" data-path="web-scraping.html"><a href="web-scraping.html#black-report-2"><i class="fa fa-check"></i><b>14.5</b> Black Report 2</a></li>
<li class="chapter" data-level="14.6" data-path="web-scraping.html"><a href="web-scraping.html#home-work-2-1"><i class="fa fa-check"></i><b>14.6</b> home work 2</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="webscraping-example-3-pubmed-and-r-with-endnote.html"><a href="webscraping-example-3-pubmed-and-r-with-endnote.html"><i class="fa fa-check"></i><b>15</b> WebScraping Example 3: PubMed and R with EndNote</a>
<ul>
<li class="chapter" data-level="15.1" data-path="webscraping-example-3-pubmed-and-r-with-endnote.html"><a href="webscraping-example-3-pubmed-and-r-with-endnote.html#pubmed-검색-방법"><i class="fa fa-check"></i><b>15.1</b> PubMed 검색 방법</a></li>
<li class="chapter" data-level="15.2" data-path="webscraping-example-3-pubmed-and-r-with-endnote.html"><a href="webscraping-example-3-pubmed-and-r-with-endnote.html#r-에서-pubmed-query-사용"><i class="fa fa-check"></i><b>15.2</b> R 에서 PubMed Query 사용</a></li>
<li class="chapter" data-level="15.3" data-path="webscraping-example-3-pubmed-and-r-with-endnote.html"><a href="webscraping-example-3-pubmed-and-r-with-endnote.html#pdf-자동-보고서"><i class="fa fa-check"></i><b>15.3</b> PDF 자동 보고서</a></li>
<li class="chapter" data-level="15.4" data-path="webscraping-example-3-pubmed-and-r-with-endnote.html"><a href="webscraping-example-3-pubmed-and-r-with-endnote.html#원문-pdf-찾기"><i class="fa fa-check"></i><b>15.4</b> 원문 PDF 찾기</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="date-and-time-series.html"><a href="date-and-time-series.html"><i class="fa fa-check"></i><b>16</b> Date and time series</a>
<ul>
<li class="chapter" data-level="16.1" data-path="date-and-time-series.html"><a href="date-and-time-series.html#date-create"><i class="fa fa-check"></i><b>16.1</b> Date create</a></li>
<li class="chapter" data-level="16.2" data-path="date-and-time-series.html"><a href="date-and-time-series.html#tutor-heat-wave-and-death"><i class="fa fa-check"></i><b>16.2</b> Tutor: heat wave and death</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="date-and-time-series.html"><a href="date-and-time-series.html#date-create-1"><i class="fa fa-check"></i><b>16.2.1</b> date create</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="date-and-time-series.html"><a href="date-and-time-series.html#home-work"><i class="fa fa-check"></i><b>16.3</b> home work</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="date-and-time-series.html"><a href="date-and-time-series.html#home0"><i class="fa fa-check"></i><b>16.3.1</b> home0</a></li>
<li class="chapter" data-level="16.3.2" data-path="date-and-time-series.html"><a href="date-and-time-series.html#home-work1"><i class="fa fa-check"></i><b>16.3.2</b> home work1</a></li>
<li class="chapter" data-level="16.3.3" data-path="date-and-time-series.html"><a href="date-and-time-series.html#home-work2"><i class="fa fa-check"></i><b>16.3.3</b> home work2</a></li>
<li class="chapter" data-level="16.3.4" data-path="date-and-time-series.html"><a href="date-and-time-series.html#home-work3"><i class="fa fa-check"></i><b>16.3.4</b> home work3</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="date-and-time-series.html"><a href="date-and-time-series.html#time-series-data-analysis"><i class="fa fa-check"></i><b>16.4</b> Time series data analysis</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="date-and-time-series.html"><a href="date-and-time-series.html#outside-사망에-대해서"><i class="fa fa-check"></i><b>16.4.1</b> outside 사망에 대해서</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="date-and-time-series.html"><a href="date-and-time-series.html#time-series-data-analysis-regression"><i class="fa fa-check"></i><b>16.5</b> Time series data analysis, regression</a></li>
<li class="chapter" data-level="16.6" data-path="date-and-time-series.html"><a href="date-and-time-series.html#introduction-4"><i class="fa fa-check"></i><b>16.6</b> introduction</a></li>
<li class="chapter" data-level="16.7" data-path="date-and-time-series.html"><a href="date-and-time-series.html#미세먼지와-심혈관사망"><i class="fa fa-check"></i><b>16.7</b> 미세먼지와 심혈관사망</a></li>
<li class="chapter" data-level="16.8" data-path="date-and-time-series.html"><a href="date-and-time-series.html#방법-tutor"><i class="fa fa-check"></i><b>16.8</b> 방법 tutor</a></li>
</ul></li>
<li class="part"><span><b>IV Repeat and Reproducibility</b></span></li>
<li class="chapter" data-level="17" data-path="repeated-analysis.html"><a href="repeated-analysis.html"><i class="fa fa-check"></i><b>17</b> Repeated analysis</a>
<ul>
<li class="chapter" data-level="17.1" data-path="repeated-analysis.html"><a href="repeated-analysis.html#추출"><i class="fa fa-check"></i><b>17.1</b> 추출</a></li>
<li class="chapter" data-level="17.2" data-path="repeated-analysis.html"><a href="repeated-analysis.html#파일-불러오기"><i class="fa fa-check"></i><b>17.2</b> 파일 불러오기</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="repeated-analysis.html"><a href="repeated-analysis.html#과제-2"><i class="fa fa-check"></i><b>17.2.1</b> 과제</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="repeated-analysis.html"><a href="repeated-analysis.html#분석-반복하기-change-point-찾기"><i class="fa fa-check"></i><b>17.3</b> 분석 반복하기 (change point 찾기)</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="repeated-analysis.html"><a href="repeated-analysis.html#자료-생성"><i class="fa fa-check"></i><b>17.3.1</b> 자료 생성</a></li>
<li class="chapter" data-level="17.3.2" data-path="repeated-analysis.html"><a href="repeated-analysis.html#가상의-threshold-값-수행해보기"><i class="fa fa-check"></i><b>17.3.2</b> 가상의 threshold 값 수행해보기</a></li>
<li class="chapter" data-level="17.3.3" data-path="repeated-analysis.html"><a href="repeated-analysis.html#과제-3"><i class="fa fa-check"></i><b>17.3.3</b> 과제</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="repeated-analysis.html"><a href="repeated-analysis.html#repeated-analysis-big-data"><i class="fa fa-check"></i><b>17.4</b> Repeated analysis (big data)</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="repeated-analysis.html"><a href="repeated-analysis.html#data-profile"><i class="fa fa-check"></i><b>17.4.1</b> Data profile</a></li>
<li class="chapter" data-level="17.4.2" data-path="repeated-analysis.html"><a href="repeated-analysis.html#data-handling-start"><i class="fa fa-check"></i><b>17.4.2</b> data handling start</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Communication</b></span></li>
<li class="chapter" data-level="18" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>18</b> R markdown</a>
<ul>
<li class="chapter" data-level="18.1" data-path="r-markdown.html"><a href="r-markdown.html#설치"><i class="fa fa-check"></i><b>18.1</b> 설치</a></li>
<li class="chapter" data-level="18.2" data-path="r-markdown.html"><a href="r-markdown.html#components"><i class="fa fa-check"></i><b>18.2</b> 3 components</a></li>
<li class="chapter" data-level="18.3" data-path="r-markdown.html"><a href="r-markdown.html#simple-tutor"><i class="fa fa-check"></i><b>18.3</b> simple tutor</a></li>
<li class="chapter" data-level="18.4" data-path="r-markdown.html"><a href="r-markdown.html#chunck-option"><i class="fa fa-check"></i><b>18.4</b> chunck option</a></li>
<li class="chapter" data-level="18.5" data-path="r-markdown.html"><a href="r-markdown.html#table-만들기"><i class="fa fa-check"></i><b>18.5</b> Table 만들기</a></li>
<li class="chapter" data-level="18.6" data-path="r-markdown.html"><a href="r-markdown.html#필독"><i class="fa fa-check"></i><b>18.6</b> 필독!</a></li>
<li class="chapter" data-level="18.7" data-path="r-markdown.html"><a href="r-markdown.html#동영상-1"><i class="fa fa-check"></i><b>18.7</b> 동영상</a></li>
<li class="chapter" data-level="18.8" data-path="r-markdown.html"><a href="r-markdown.html#과제-4"><i class="fa fa-check"></i><b>18.8</b> 과제</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="rmarkdown-and-reporting.html"><a href="rmarkdown-and-reporting.html"><i class="fa fa-check"></i><b>19</b> Rmarkdown and reporting</a>
<ul>
<li class="chapter" data-level="19.1" data-path="rmarkdown-and-reporting.html"><a href="rmarkdown-and-reporting.html#rmarkdown-and-word-office-down"><i class="fa fa-check"></i><b>19.1</b> Rmarkdown and Word (office down)</a></li>
<li class="chapter" data-level="19.2" data-path="rmarkdown-and-reporting.html"><a href="rmarkdown-and-reporting.html#rmarkdown-and-pdf"><i class="fa fa-check"></i><b>19.2</b> Rmarkdown and PDF</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="google-maps-platform.html"><a href="google-maps-platform.html"><i class="fa fa-check"></i><b>20</b> Google Maps Platform</a>
<ul>
<li class="chapter" data-level="20.1" data-path="google-maps-platform.html"><a href="google-maps-platform.html#google-tackeout"><i class="fa fa-check"></i><b>20.1</b> Google Tackeout</a></li>
<li class="chapter" data-level="20.2" data-path="google-maps-platform.html"><a href="google-maps-platform.html#data-visualization"><i class="fa fa-check"></i><b>20.2</b> Data visualization</a></li>
<li class="chapter" data-level="20.3" data-path="google-maps-platform.html"><a href="google-maps-platform.html#google-api"><i class="fa fa-check"></i><b>20.3</b> google API</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="leaflet.html"><a href="leaflet.html"><i class="fa fa-check"></i><b>21</b> Map using leaflet</a>
<ul>
<li class="chapter" data-level="21.1" data-path="leaflet.html"><a href="leaflet.html#leaflet-1"><i class="fa fa-check"></i><b>21.1</b> leaflet</a></li>
<li class="chapter" data-level="21.2" data-path="leaflet.html"><a href="leaflet.html#위치와-시간표시"><i class="fa fa-check"></i><b>21.2</b> 위치와 시간표시</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="shinyapps.html"><a href="shinyapps.html"><i class="fa fa-check"></i><b>22</b> shinyapps</a>
<ul>
<li class="chapter" data-level="22.1" data-path="shinyapps.html"><a href="shinyapps.html#설치-1"><i class="fa fa-check"></i><b>22.1</b> 설치</a></li>
<li class="chapter" data-level="22.2" data-path="shinyapps.html"><a href="shinyapps.html#예제"><i class="fa fa-check"></i><b>22.2</b> 예제</a></li>
<li class="chapter" data-level="22.3" data-path="shinyapps.html"><a href="shinyapps.html#예제-1-만들기"><i class="fa fa-check"></i><b>22.3</b> 예제 1 만들기</a>
<ul>
<li class="chapter" data-level="22.3.1" data-path="shinyapps.html"><a href="shinyapps.html#구조"><i class="fa fa-check"></i><b>22.3.1</b> 구조</a></li>
<li class="chapter" data-level="22.3.2" data-path="shinyapps.html"><a href="shinyapps.html#input-output"><i class="fa fa-check"></i><b>22.3.2</b> input, output</a></li>
<li class="chapter" data-level="22.3.3" data-path="shinyapps.html"><a href="shinyapps.html#과제-5"><i class="fa fa-check"></i><b>22.3.3</b> 과제</a></li>
</ul></li>
<li class="chapter" data-level="22.4" data-path="shinyapps.html"><a href="shinyapps.html#deploy-shiny-app-local-server"><i class="fa fa-check"></i><b>22.4</b> deploy shiny app (local server)</a>
<ul>
<li class="chapter" data-level="22.4.1" data-path="shinyapps.html"><a href="shinyapps.html#과제-6"><i class="fa fa-check"></i><b>22.4.1</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DsPubs with R tutor book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="other-visulization-example" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Chapter 12</span> Other visulization example<a href="other-visulization-example.html#other-visulization-example" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="wave-form-data-visualization-example-for-public-health" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> wave form data visualization example for public health<a href="other-visulization-example.html#wave-form-data-visualization-example-for-public-health" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('right', 'top', 'auto', '1', 'Click to copy', 'Done');
</script>
<iframe width="560" height="315" src="https://www.youtube.com/embed/LvjzIqSYKas" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<div id="data-visualization-example-eeg-data" class="section level3 hasAnchor" number="12.1.1">
<h3><span class="header-section-number">12.1.1</span> Data Visualization example (EEG data)<a href="other-visulization-example.html#data-visualization-example-eeg-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In public health, another most common used data is bio-signal data. Bio-signal data usually used in medical research, but recently bio-log signals are widely used in public health beyond medical setting. Now I present some example of data visualization using bio-signal data from EEG.</p>
</div>
<div id="introduction-1" class="section level3 hasAnchor" number="12.1.2">
<h3><span class="header-section-number">12.1.2</span> Introduction<a href="other-visulization-example.html#introduction-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>EEG refers to the signal of the brain’s electrical activty. Electrodes are placed on the scalp, and each electrodes recorded brain’s activity. EEG is one of the most common methods to support diagnosis of brain diseases such as epilepsy, sleep disorder and even brain death. Furthermore, we can get usufull understand how brain activity correlated to various neurological activity. So, I tried to anaysis EEG signal and hope to predict eye opening status.</p>
<p>The data include information of <code>row_n</code>, <code>AF3</code>, <code>F7</code>, <code>F3</code>, <code>FC5</code>, <code>T7</code>,<code>P7</code>, <code>O1</code>, <code>O2</code>, <code>P8</code>, <code>T8</code>, <code>FC6</code>, <code>F4</code>, <code>F8</code>, <code>AF4</code>, and <code>eyeDetection</code>. Eye Detection is outcome variable data <code>Open</code> or <code>Closed</code>. Others numeric variable about activity of each electrodes. Each electro-nodes place on scalp, and represent area of particular location on brain, as below.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="other-visulization-example.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb1-2"><a href="other-visulization-example.html#cb1-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/7/70/21_electrodes_of_International_10-20_system_for_EEG.svg/1024px-21_electrodes_of_International_10-20_system_for_EEG.svg.png&quot;</span></span>
<span id="cb1-3"><a href="other-visulization-example.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(url, <span class="st">&#39;images/eegpng.png&#39;</span>)</span></code></pre></div>
<div class="figure">
<img src="images/eegpng.png" alt="" />
<p class="caption">eeg electrodes from wiki</p>
</div>
</div>
<div id="dataset-and-data-step" class="section level3 hasAnchor" number="12.1.3">
<h3><span class="header-section-number">12.1.3</span> Dataset and Data step<a href="other-visulization-example.html#dataset-and-data-step" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="data-download-and-handling" class="section level4 hasAnchor" number="12.1.3.1">
<h4><span class="header-section-number">12.1.3.1</span> Data download and handling<a href="other-visulization-example.html#data-download-and-handling" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The data set locate here, <code>https://archive.ics.uci.edu/ml/machine-learning-databases/00264/EEG%20Eye%20State.arff</code>.
The data was stored into my computer, as name of ‘dl_eeg.txt’ in `data’ folder.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="other-visulization-example.html#cb2-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span><span class="st">&#39;https://archive.ics.uci.edu/ml/machine-learning-databases/00264/EEG%20Eye%20State.arff&#39;</span></span>
<span id="cb2-2"><a href="other-visulization-example.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(url, <span class="st">&#39;data/dl_eeg.txt&#39;</span>)</span></code></pre></div>
<p>To start the data step, some packages should be loaded.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="other-visulization-example.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;tidyverse&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb3-2"><a href="other-visulization-example.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;htmlTable&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;htmlTable&quot;</span>)</span>
<span id="cb3-3"><a href="other-visulization-example.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;broom&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;broom&quot;</span>)</span>
<span id="cb3-4"><a href="other-visulization-example.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;ggthemes&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;ggthemes&quot;</span>)</span>
<span id="cb3-5"><a href="other-visulization-example.html#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># packages from github</span></span>
<span id="cb3-6"><a href="other-visulization-example.html#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;devtools&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb3-7"><a href="other-visulization-example.html#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb3-8"><a href="other-visulization-example.html#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">install_github</span>(<span class="st">&quot;jinhaslab/tabf&quot;</span>, <span class="at">force =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## * checking for file ‘/tmp/RtmpGqUNMr/remotes6bbee32a7a281/jinhaslab-tabf-84d3e16/DESCRIPTION’ ... OK
## * preparing ‘tabf’:
## * checking DESCRIPTION meta-information ... OK
## * checking for LF line-endings in source and make files and shell scripts
## * checking for empty or unneeded directories
## * building ‘tabf_0.0.0.9000.tar.gz’</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="other-visulization-example.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tabf)</span>
<span id="cb5-2"><a href="other-visulization-example.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#library(caret)</span></span>
<span id="cb5-3"><a href="other-visulization-example.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb5-4"><a href="other-visulization-example.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb5-5"><a href="other-visulization-example.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#library(doMC)</span></span></code></pre></div>
<p>scan the data and creat DB for analysis</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="other-visulization-example.html#cb6-1" aria-hidden="true" tabindex="-1"></a>mm <span class="ot">&lt;-</span> <span class="fu">scan</span>(<span class="st">&#39;data/dl_eeg.txt&#39;</span>, <span class="at">what=</span><span class="st">&quot;&quot;</span>, <span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb6-2"><a href="other-visulization-example.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(mm <span class="sc">==</span> <span class="st">&#39;@DATA&#39;</span>)</span></code></pre></div>
<pre><code>## [1] 48</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="other-visulization-example.html#cb8-1" aria-hidden="true" tabindex="-1"></a>dat<span class="ot">&lt;-</span>mm[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">48</span>)]</span>
<span id="cb8-2"><a href="other-visulization-example.html#cb8-2" aria-hidden="true" tabindex="-1"></a>book <span class="ot">&lt;-</span> mm[<span class="dv">1</span><span class="sc">:</span><span class="dv">48</span>]</span>
<span id="cb8-3"><a href="other-visulization-example.html#cb8-3" aria-hidden="true" tabindex="-1"></a>book[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">48</span>)] <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="other-visulization-example.html#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">matrix</span>(., <span class="at">ncol=</span><span class="dv">3</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="other-visulization-example.html#cb8-5" aria-hidden="true" tabindex="-1"></a>  .[,<span class="dv">2</span>] <span class="ot">-&gt;</span> col_names</span>
<span id="cb8-6"><a href="other-visulization-example.html#cb8-6" aria-hidden="true" tabindex="-1"></a>col_names</span></code></pre></div>
<pre><code>##  [1] &quot;AF3&quot;          &quot;F7&quot;           &quot;F3&quot;           &quot;FC5&quot;          &quot;T7&quot;          
##  [6] &quot;P7&quot;           &quot;O1&quot;           &quot;O2&quot;           &quot;P8&quot;           &quot;T8&quot;          
## [11] &quot;FC6&quot;          &quot;F4&quot;           &quot;F8&quot;           &quot;AF4&quot;          &quot;eyeDetection&quot;</code></pre>
<p>the tibble form is easy to hand or transforming. So, I change the data form to tibble style.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="other-visulization-example.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">wave =</span>dat) <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="other-visulization-example.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">val =</span> <span class="fu">strsplit</span>(wave, <span class="st">&quot;,&quot;</span>), <span class="at">row_n=</span><span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="other-visulization-example.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span> (<span class="at">cols=</span><span class="fu">c</span>(val)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="other-visulization-example.html#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span> (<span class="sc">-</span>wave) <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="other-visulization-example.html#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">val =</span> <span class="fu">as.numeric</span>(val)) <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="other-visulization-example.html#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(row_n)  <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="other-visulization-example.html#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">wave_colname =</span> col_names) <span class="sc">%&gt;%</span> </span>
<span id="cb10-8"><a href="other-visulization-example.html#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-9"><a href="other-visulization-example.html#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span> (<span class="at">key =</span> wave_colname, <span class="at">value =</span> val, <span class="at">fill =</span> <span class="dv">0</span>,<span class="at">convert =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-10"><a href="other-visulization-example.html#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span> (row_n, col_names) <span class="sc">%&gt;%</span></span>
<span id="cb10-11"><a href="other-visulization-example.html#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span> (row_n) <span class="ot">-&gt;</span> </span>
<span id="cb10-12"><a href="other-visulization-example.html#cb10-12" aria-hidden="true" tabindex="-1"></a>  eeg</span></code></pre></div>
<p>I check the class of all variable.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="other-visulization-example.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(eeg)</span></code></pre></div>
<pre><code>##  [1] &quot;row_n&quot;        &quot;AF3&quot;          &quot;F7&quot;           &quot;F3&quot;           &quot;FC5&quot;         
##  [6] &quot;T7&quot;           &quot;P7&quot;           &quot;O1&quot;           &quot;O2&quot;           &quot;P8&quot;          
## [11] &quot;T8&quot;           &quot;FC6&quot;          &quot;F4&quot;           &quot;F8&quot;           &quot;AF4&quot;         
## [16] &quot;eyeDetection&quot;</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="other-visulization-example.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(eeg, mode)</span></code></pre></div>
<pre><code>##        row_n          AF3           F7           F3          FC5           T7 
##    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot; 
##           P7           O1           O2           P8           T8          FC6 
##    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot; 
##           F4           F8          AF4 eyeDetection 
##    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;</code></pre>
<p>This data were measure for 117 seconds, I create <code>sec</code> variable to represent measurement time. I create facotor variable for eye opening status `Eye’, as below.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="other-visulization-example.html#cb15-1" aria-hidden="true" tabindex="-1"></a>eeg <span class="ot">&lt;-</span> eeg <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="other-visulization-example.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Eye =</span> <span class="fu">ifelse</span>(eyeDetection <span class="sc">==</span><span class="dv">1</span>, <span class="st">&#39;open&#39;</span>, <span class="st">&#39;closed&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="other-visulization-example.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sec =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">117</span>, <span class="at">length.out =</span> <span class="fu">nrow</span>(.)))</span></code></pre></div>
<p>For data step, the long form data were created via <code>gather</code> function. the key represent each electrode, and the activity were stored into <code>activity</code> variable. EyeDetection, row_n, sec, Eye will be indentical variable for each electrode activity.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="other-visulization-example.html#cb16-1" aria-hidden="true" tabindex="-1"></a>eeg <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="other-visulization-example.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&#39;electrode&#39;</span>, <span class="at">value =</span> <span class="st">&#39;activity&#39;</span>, <span class="sc">-</span>eyeDetection, <span class="sc">-</span>row_n, <span class="sc">-</span>sec, <span class="sc">-</span>Eye) <span class="ot">-&gt;</span></span>
<span id="cb16-3"><a href="other-visulization-example.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  eegl</span>
<span id="cb16-4"><a href="other-visulization-example.html#cb16-4" aria-hidden="true" tabindex="-1"></a>eegl <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##   row_n eyeDetection Eye        sec electrode activity
##   &lt;int&gt;        &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;
## 1     1            0 closed 0       AF3          4329.
## 2     2            0 closed 0.00781 AF3          4325.
## 3     3            0 closed 0.0156  AF3          4328.
## 4     4            0 closed 0.0234  AF3          4329.
## 5     5            0 closed 0.0312  AF3          4326.
## 6     6            0 closed 0.0391  AF3          4321.</code></pre>
</div>
<div id="data-explorer" class="section level4 hasAnchor" number="12.1.3.2">
<h4><span class="header-section-number">12.1.3.2</span> data explorer<a href="other-visulization-example.html#data-explorer" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="heatmap" class="section level5 hasAnchor" number="12.1.3.2.1">
<h5><span class="header-section-number">12.1.3.2.1</span> heatmap<a href="other-visulization-example.html#heatmap" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The heatmap can show overview the time course about eye opening status. Dark blue indicate closed status, and light blue indicate eye open status.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="other-visulization-example.html#cb18-1" aria-hidden="true" tabindex="-1"></a>eegl <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="other-visulization-example.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sec, <span class="at">y =</span> <span class="fl">0.5</span>, <span class="at">fill =</span> eyeDetection)) <span class="sc">+</span></span>
<span id="cb18-3"><a href="other-visulization-example.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb18-4"><a href="other-visulization-example.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Eye status&quot;</span>, </span>
<span id="cb18-5"><a href="other-visulization-example.html#cb18-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), </span>
<span id="cb18-6"><a href="other-visulization-example.html#cb18-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&#39;closed&#39;</span>,<span class="st">&quot;transit&quot;</span>, <span class="st">&#39;open&#39;</span>), </span>
<span id="cb18-7"><a href="other-visulization-example.html#cb18-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.5</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb18-8"><a href="other-visulization-example.html#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb18-9"><a href="other-visulization-example.html#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="dv">1</span>), <span class="st">&#39;Eye status&#39;</span>) <span class="sc">+</span></span>
<span id="cb18-10"><a href="other-visulization-example.html#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">30</span>, <span class="dv">60</span>, <span class="dv">90</span>, <span class="dv">117</span>)) <span class="sc">+</span></span>
<span id="cb18-11"><a href="other-visulization-example.html#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio=</span><span class="dv">1</span><span class="sc">/</span><span class="dv">7</span>)</span></code></pre></div>
<p><img src="testbook_files/figure-html/heatmap%20wave%20form%201-1.png" width="672" />
##### waveform</p>
<p>The activity waves are plotting for data explorer.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="other-visulization-example.html#cb19-1" aria-hidden="true" tabindex="-1"></a>eegl <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="other-visulization-example.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> row_n, <span class="at">y =</span> activity, <span class="at">color =</span> Eye)) <span class="sc">+</span></span>
<span id="cb19-3"><a href="other-visulization-example.html#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fu">c</span>(<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb19-4"><a href="other-visulization-example.html#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb19-5"><a href="other-visulization-example.html#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(electrode <span class="sc">~</span>. ) <span class="sc">+</span></span>
<span id="cb19-6"><a href="other-visulization-example.html#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() </span></code></pre></div>
<p><img src="testbook_files/figure-html/wave%20form%20time%20series%20without%20cleaning-1.png" width="672" />
There are much of outlier, so the fluctuation of each node’s activity atteunted. So We needed to exclude outlier. To ensure the outlier status, I plot the boxplot, as below. The boxplot also suggested that there were much of outlier effect.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="other-visulization-example.html#cb20-1" aria-hidden="true" tabindex="-1"></a>eegl <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="other-visulization-example.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> electrode, <span class="at">y =</span> activity, <span class="at">color =</span> Eye)) <span class="sc">+</span></span>
<span id="cb20-3"><a href="other-visulization-example.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb20-4"><a href="other-visulization-example.html#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans=</span><span class="st">&#39;log2&#39;</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="other-visulization-example.html#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="testbook_files/figure-html/outlier%20exploer%20boxplot%20waveform-1.png" width="672" />
Althoug there are outlier effect on data, but I just want to check the <code>t-test</code> results.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="other-visulization-example.html#cb21-1" aria-hidden="true" tabindex="-1"></a>ttest<span class="ot">&lt;-</span> eegl <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>eyeDetection, <span class="sc">-</span>row_n) <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="other-visulization-example.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(electrode)  <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="other-visulization-example.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href="other-visulization-example.html#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stats     =</span> <span class="fu">map</span>(data, <span class="sc">~</span><span class="fu">t.test</span>(activity <span class="sc">~</span> Eye, <span class="at">data=</span>.x)), </span>
<span id="cb21-5"><a href="other-visulization-example.html#cb21-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">summarise =</span> <span class="fu">map</span>(stats, broom<span class="sc">::</span>glance))  <span class="sc">%&gt;%</span></span>
<span id="cb21-6"><a href="other-visulization-example.html#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(electrode, summarise) <span class="sc">%&gt;%</span></span>
<span id="cb21-7"><a href="other-visulization-example.html#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(summarise) </span>
<span id="cb21-8"><a href="other-visulization-example.html#cb21-8" aria-hidden="true" tabindex="-1"></a>ttest <span class="sc">%&gt;%</span> </span>
<span id="cb21-9"><a href="other-visulization-example.html#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.numeric, round, <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-10"><a href="other-visulization-example.html#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p.values =</span> <span class="fu">ifelse</span>(p.value <span class="sc">&lt;</span><span class="fl">0.01</span>, <span class="st">&#39;&lt;0.01&#39;</span>, <span class="fu">as.character</span>(p.value))) <span class="sc">%&gt;%</span></span>
<span id="cb21-11"><a href="other-visulization-example.html#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(electrode,<span class="st">`</span><span class="at">difference</span><span class="st">`</span> <span class="ot">=</span> estimate, <span class="st">&#39;open&#39;</span> <span class="ot">=</span> estimate1, <span class="st">&#39;closed&#39;</span> <span class="ot">=</span>  estimate2, p.values) <span class="sc">%&gt;%</span></span>
<span id="cb21-12"><a href="other-visulization-example.html#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">htmlTable</span>(</span>
<span id="cb21-13"><a href="other-visulization-example.html#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">cgroup=</span><span class="fu">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;Eye status&quot;</span>, <span class="st">&quot;&quot;</span>), </span>
<span id="cb21-14"><a href="other-visulization-example.html#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">n.cgroup=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>), </span>
<span id="cb21-15"><a href="other-visulization-example.html#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Table1. t-test result without outlier cleaning&quot;</span>, </span>
<span id="cb21-16"><a href="other-visulization-example.html#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">&#39;llrc&#39;</span></span>
<span id="cb21-17"><a href="other-visulization-example.html#cb21-17" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<td colspan="8" style="text-align: left;">
Table1. t-test result without outlier cleaning
</td>
</tr>
<tr>
<th style="border-top: 2px solid grey;">
</th>
<th colspan="2" style="font-weight: 900; border-top: 2px solid grey; text-align: center;">
</th>
<th style="border-bottom: none; border-top: 2px solid grey;" colspan="1">
 
</th>
<th colspan="2" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
Eye status
</th>
<th style="border-bottom: none; border-top: 2px solid grey;" colspan="1">
 
</th>
<th colspan="1" style="font-weight: 900; border-top: 2px solid grey; text-align: center;">
</th>
</tr>
<tr>
<th style="border-bottom: 1px solid grey;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
electrode
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
difference
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;" colspan="1">
 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
open
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
closed
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;" colspan="1">
 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
p.values
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">
1
</td>
<td style="text-align: left;">
AF3
</td>
<td style="text-align: left;">
-52.4
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4298.4
</td>
<td style="text-align: center;">
4350.8
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
0.25
</td>
</tr>
<tr>
<td style="text-align: left;">
2
</td>
<td style="text-align: left;">
F7
</td>
<td style="text-align: left;">
7.39
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4013.08
</td>
<td style="text-align: center;">
4005.69
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
&lt;0.01
</td>
</tr>
<tr>
<td style="text-align: left;">
3
</td>
<td style="text-align: left;">
F3
</td>
<td style="text-align: left;">
-3.47
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4262.46
</td>
<td style="text-align: center;">
4265.94
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
&lt;0.01
</td>
</tr>
<tr>
<td style="text-align: left;">
4
</td>
<td style="text-align: left;">
FC5
</td>
<td style="text-align: left;">
78.98
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4200.39
</td>
<td style="text-align: center;">
4121.41
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
0.31
</td>
</tr>
<tr>
<td style="text-align: left;">
5
</td>
<td style="text-align: left;">
T7
</td>
<td style="text-align: left;">
0.03
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4341.75
</td>
<td style="text-align: center;">
4341.73
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
0.96
</td>
</tr>
<tr>
<td style="text-align: left;">
6
</td>
<td style="text-align: left;">
P7
</td>
<td style="text-align: left;">
46.13
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4664.73
</td>
<td style="text-align: center;">
4618.59
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
0.29
</td>
</tr>
<tr>
<td style="text-align: left;">
7
</td>
<td style="text-align: left;">
O1
</td>
<td style="text-align: left;">
66.82
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4140.39
</td>
<td style="text-align: center;">
4073.57
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
0.33
</td>
</tr>
<tr>
<td style="text-align: left;">
8
</td>
<td style="text-align: left;">
O2
</td>
<td style="text-align: left;">
-1.48
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4615.39
</td>
<td style="text-align: center;">
4616.87
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
&lt;0.01
</td>
</tr>
<tr>
<td style="text-align: left;">
9
</td>
<td style="text-align: left;">
P8
</td>
<td style="text-align: left;">
-41.13
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4200.37
</td>
<td style="text-align: center;">
4241.5
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
0.29
</td>
</tr>
<tr>
<td style="text-align: left;">
10
</td>
<td style="text-align: left;">
T8
</td>
<td style="text-align: left;">
-3.61
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4229.7
</td>
<td style="text-align: center;">
4233.31
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
&lt;0.01
</td>
</tr>
<tr>
<td style="text-align: left;">
11
</td>
<td style="text-align: left;">
FC6
</td>
<td style="text-align: left;">
-4.88
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4200.26
</td>
<td style="text-align: center;">
4205.15
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
&lt;0.01
</td>
</tr>
<tr>
<td style="text-align: left;">
12
</td>
<td style="text-align: left;">
F4
</td>
<td style="text-align: left;">
-4.01
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4277.43
</td>
<td style="text-align: center;">
4281.44
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
&lt;0.01
</td>
</tr>
<tr>
<td style="text-align: left;">
13
</td>
<td style="text-align: left;">
F8
</td>
<td style="text-align: left;">
-31.88
</td>
<td style="text-align: left;" colspan="1">
 
</td>
<td style="text-align: right;">
4600.9
</td>
<td style="text-align: center;">
4632.77
</td>
<td style="text-align: center;" colspan="1">
 
</td>
<td style="text-align: center;">
0.15
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
14
</td>
<td style="border-bottom: 2px solid grey; text-align: left;">
AF4
</td>
<td style="border-bottom: 2px solid grey; text-align: left;">
89.42
</td>
<td style="border-bottom: 2px solid grey; text-align: left;" colspan="1">
 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
4456.57
</td>
<td style="border-bottom: 2px solid grey; text-align: center;">
4367.15
</td>
<td style="border-bottom: 2px solid grey; text-align: center;" colspan="1">
 
</td>
<td style="border-bottom: 2px solid grey; text-align: center;">
0.31
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="data-cleaning-for-outlier" class="section level4 hasAnchor" number="12.1.3.3">
<h4><span class="header-section-number">12.1.3.3</span> data cleaning for outlier<a href="other-visulization-example.html#data-cleaning-for-outlier" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The interquartile range is useful for detecting the presence of outliers. Outliers are individual values that fall outside of the overall pattern of a data set. So, the outlier can be define when they are far way as several times of interquarile range from median. I made <code>scale_median</code> function to detect outlier. ther are several step to make function. first, calculate the interquartile range. The differece between median and value divided by inter quartile range, and the absolute value will be Z-score. That z-score mean how many times of interquartile range far from median. I used 2.5 times for detect outlier.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="other-visulization-example.html#cb22-1" aria-hidden="true" tabindex="-1"></a>scale_median <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb22-2"><a href="other-visulization-example.html#cb22-2" aria-hidden="true" tabindex="-1"></a>    Q1  <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x, <span class="fl">0.25</span>)</span>
<span id="cb22-3"><a href="other-visulization-example.html#cb22-3" aria-hidden="true" tabindex="-1"></a>    Q3  <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x, <span class="fl">0.75</span>)</span>
<span id="cb22-4"><a href="other-visulization-example.html#cb22-4" aria-hidden="true" tabindex="-1"></a>    iqr <span class="ot">&lt;-</span> <span class="fu">c</span>(Q3 <span class="sc">-</span> Q1)</span>
<span id="cb22-5"><a href="other-visulization-example.html#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(x <span class="sc">&lt;</span> <span class="fu">median</span>(x),(x <span class="sc">-</span> Q1)<span class="sc">/</span>iqr<span class="sc">*-</span><span class="dv">1</span>,(x <span class="sc">-</span> Q3)<span class="sc">/</span>iqr<span class="sc">*</span><span class="dv">1</span> )</span>
<span id="cb22-6"><a href="other-visulization-example.html#cb22-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-7"><a href="other-visulization-example.html#cb22-7" aria-hidden="true" tabindex="-1"></a>eegl1<span class="ot">&lt;-</span> </span>
<span id="cb22-8"><a href="other-visulization-example.html#cb22-8" aria-hidden="true" tabindex="-1"></a>  eegl <span class="sc">%&gt;%</span> </span>
<span id="cb22-9"><a href="other-visulization-example.html#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(electrode) <span class="sc">%&gt;%</span></span>
<span id="cb22-10"><a href="other-visulization-example.html#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-11"><a href="other-visulization-example.html#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Zscores =</span> <span class="fu">map</span> (data, <span class="sc">~</span><span class="fu">scale_median</span>(.<span class="sc">$</span>activity))) <span class="sc">%&gt;%</span> </span>
<span id="cb22-12"><a href="other-visulization-example.html#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(data, Zscores))  <span class="sc">%&gt;%</span></span>
<span id="cb22-13"><a href="other-visulization-example.html#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Zscores <span class="sc">&lt;</span> <span class="fl">2.5</span>) <span class="co">#Outlier is Zscores &gt; 2.5 or &lt;-2.5</span></span></code></pre></div>
<p>I check box-plot without outlier. That plot sounds good for me. So, I can generate wave form plot.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="other-visulization-example.html#cb23-1" aria-hidden="true" tabindex="-1"></a>eegl1 <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="other-visulization-example.html#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> electrode, <span class="at">y =</span> activity, <span class="at">color =</span> Eye)) <span class="sc">+</span></span>
<span id="cb23-3"><a href="other-visulization-example.html#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() </span></code></pre></div>
<p><img src="testbook_files/figure-html/eeg%20data%20waveform%20boxplot%20after%20outlier%20cleaning-1.png" width="672" />
Here, I plot wave form of each electrodes’ activity. Before generate the wave plot, I want increase the working cores.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="other-visulization-example.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&#39;doMC&#39;</span>)</span>
<span id="cb24-2"><a href="other-visulization-example.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(parallel)</span>
<span id="cb24-3"><a href="other-visulization-example.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getDoParWorkers</span>()</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="other-visulization-example.html#cb26-1" aria-hidden="true" tabindex="-1"></a>number_of_cores <span class="ot">&lt;-</span> <span class="fu">detectCores</span>()</span></code></pre></div>
<p>My computer use only 1 core, so I increse nubmer of cores working upto 11 cores.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="other-visulization-example.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">registerDoMC</span>(<span class="at">cores =</span> number_of_cores <span class="sc">-</span> <span class="dv">2</span>)</span>
<span id="cb27-2"><a href="other-visulization-example.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getDoParWorkers</span>()</span></code></pre></div>
<pre><code>## [1] 46</code></pre>
<p>Then, I want plot wave form.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="other-visulization-example.html#cb29-1" aria-hidden="true" tabindex="-1"></a>eegl1 <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="other-visulization-example.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sec, <span class="at">y =</span> activity, <span class="at">fill =</span> eyeDetection)) <span class="sc">+</span></span>
<span id="cb29-3"><a href="other-visulization-example.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb29-4"><a href="other-visulization-example.html#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> eyeDetection), <span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb29-5"><a href="other-visulization-example.html#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(electrode <span class="sc">~</span>., <span class="at">scales =</span> <span class="st">&quot;free&quot;</span> ) <span class="sc">+</span></span>
<span id="cb29-6"><a href="other-visulization-example.html#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb29-7"><a href="other-visulization-example.html#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Eye status&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), </span>
<span id="cb29-8"><a href="other-visulization-example.html#cb29-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&#39;close&#39;</span>, <span class="st">&#39;open&#39;</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb29-9"><a href="other-visulization-example.html#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&#39;Time series&#39;</span>) <span class="sc">+</span></span>
<span id="cb29-10"><a href="other-visulization-example.html#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">30</span>, <span class="dv">60</span>, <span class="dv">90</span>, <span class="dv">117</span>))</span></code></pre></div>
<p><img src="testbook_files/figure-html/wave%20form%20plot%201-1.png" width="672" /></p>
</div>
<div id="data-reshape-longform-and-wideform" class="section level4 hasAnchor" number="12.1.3.4">
<h4><span class="header-section-number">12.1.3.4</span> Data reshape (longform and wideform)<a href="other-visulization-example.html#data-reshape-longform-and-wideform" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now, I can confirm the cleaer data set without outlier. I attached <code>0</code> behind to data name to figure out the clear data. I also creat wide form data, too.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="other-visulization-example.html#cb30-1" aria-hidden="true" tabindex="-1"></a>eegw0 <span class="ot">&lt;-</span> eegl1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Zscores) <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="other-visulization-example.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(<span class="at">key =</span> electrode, <span class="at">value =</span> activity) <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="other-visulization-example.html#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span>
<span id="cb30-4"><a href="other-visulization-example.html#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="other-visulization-example.html#cb30-5" aria-hidden="true" tabindex="-1"></a>eegl0 <span class="ot">&lt;-</span> eegw0 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>row_n) <span class="sc">%&gt;%</span></span>
<span id="cb30-6"><a href="other-visulization-example.html#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> electrode, <span class="at">value =</span> activity, <span class="sc">-</span><span class="fu">c</span>(eyeDetection,Eye, sec) )</span>
<span id="cb30-7"><a href="other-visulization-example.html#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(eegl0)</span></code></pre></div>
<pre><code>## [1] &quot;eyeDetection&quot; &quot;Eye&quot;          &quot;sec&quot;          &quot;electrode&quot;    &quot;activity&quot;</code></pre>
</div>
</div>
<div id="data-analysis" class="section level3 hasAnchor" number="12.1.4">
<h3><span class="header-section-number">12.1.4</span> Data analysis<a href="other-visulization-example.html#data-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="data-splite" class="section level4 hasAnchor" number="12.1.4.1">
<h4><span class="header-section-number">12.1.4.1</span> data splite<a href="other-visulization-example.html#data-splite" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>I splite traing and testing date set using 80% of eye open for training set.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="other-visulization-example.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb32-2"><a href="other-visulization-example.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb32-3"><a href="other-visulization-example.html#cb32-3" aria-hidden="true" tabindex="-1"></a>dfs <span class="ot">&lt;-</span>eegw0 <span class="sc">%&gt;%</span><span class="fu">select</span>(<span class="sc">-</span>eyeDetection, <span class="sc">-</span>sec, <span class="sc">-</span>row_n)</span>
<span id="cb32-4"><a href="other-visulization-example.html#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="other-visulization-example.html#cb32-5" aria-hidden="true" tabindex="-1"></a>trainIndex <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(dfs<span class="sc">$</span>Eye, <span class="at">p =</span> <span class="fl">0.8</span>, </span>
<span id="cb32-6"><a href="other-visulization-example.html#cb32-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">list =</span> <span class="cn">FALSE</span>, </span>
<span id="cb32-7"><a href="other-visulization-example.html#cb32-7" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">times=</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">as.vector</span>()</span>
<span id="cb32-8"><a href="other-visulization-example.html#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="other-visulization-example.html#cb32-9" aria-hidden="true" tabindex="-1"></a>training <span class="ot">&lt;-</span> dfs[ trainIndex, ]</span>
<span id="cb32-10"><a href="other-visulization-example.html#cb32-10" aria-hidden="true" tabindex="-1"></a>testing  <span class="ot">&lt;-</span> dfs[<span class="sc">-</span>trainIndex, ]</span></code></pre></div>
<p>There are 5924 points for eye closed, and 4912 points for eye open.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="other-visulization-example.html#cb33-1" aria-hidden="true" tabindex="-1"></a>training <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Eye) <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="other-visulization-example.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="other-visulization-example.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">htmlTable</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-bottom: 1px solid grey; border-top: 2px solid grey;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
Eye
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">
1
</td>
<td style="text-align: center;">
closed
</td>
<td style="text-align: center;">
5924
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
2
</td>
<td style="border-bottom: 2px solid grey; text-align: center;">
open
</td>
<td style="border-bottom: 2px solid grey; text-align: center;">
4912
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="decision-tree-simple" class="section level3 hasAnchor" number="12.1.5">
<h3><span class="header-section-number">12.1.5</span> Decision Tree simple<a href="other-visulization-example.html#decision-tree-simple" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="other-visulization-example.html#cb34-1" aria-hidden="true" tabindex="-1"></a>eeg.tree <span class="ot">=</span> <span class="fu">train</span>(<span class="at">data=</span>training,</span>
<span id="cb34-2"><a href="other-visulization-example.html#cb34-2" aria-hidden="true" tabindex="-1"></a>                  Eye <span class="sc">~</span> ., </span>
<span id="cb34-3"><a href="other-visulization-example.html#cb34-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method=</span><span class="st">&quot;rpart&quot;</span>, </span>
<span id="cb34-4"><a href="other-visulization-example.html#cb34-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">trControl =</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">&quot;cv&quot;</span>))</span>
<span id="cb34-5"><a href="other-visulization-example.html#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="other-visulization-example.html#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&#39;rattle&#39;)</span></span>
<span id="cb34-7"><a href="other-visulization-example.html#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rattle)</span>
<span id="cb34-8"><a href="other-visulization-example.html#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="fu">fancyRpartPlot</span>(eeg.tree<span class="sc">$</span>finalModel)</span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="other-visulization-example.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(eeg.pred, testing<span class="sc">$</span>Eye)</span>
<span id="cb35-2"><a href="other-visulization-example.html#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="other-visulization-example.html#cb35-3" aria-hidden="true" tabindex="-1"></a>accur <span class="ot">=</span> <span class="fu">mean</span>(eeg.pred <span class="sc">==</span> testing<span class="sc">$</span>Eye)</span>
<span id="cb35-4"><a href="other-visulization-example.html#cb35-4" aria-hidden="true" tabindex="-1"></a>accur</span></code></pre></div>
<div id="first-gbm-algorithm" class="section level4 hasAnchor" number="12.1.5.1">
<h4><span class="header-section-number">12.1.5.1</span> First gbm algorithm<a href="other-visulization-example.html#first-gbm-algorithm" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>I choose <code>Gradient boosting machine learning (gbm)</code> technique for classification problem. I search various algorithm in basic tunning by <code>caret</code> package. Among them(<code>parRF</code>, <code>naive_bayes</code>, <code>knn</code>, <code>lssvmPoly</code>, <code>svmLinearWeights</code>, <code>gbm</code>, <code>brnn</code>, <code>regLogistic</code>, <code>OneR</code>, <code>RFlda</code>, <code>qda</code>, <code>glm</code>, <code>LogitBoost</code>), the <code>gbm</code> technique show greatest performance.
The gbm is one of the decision trees methods with boosting methods. For detain, I get information from <code>http://uc-r.github.io/gbm_regression</code>. Now, I start my first gbm model</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="other-visulization-example.html#cb36-1" aria-hidden="true" tabindex="-1"></a>gbmFit1 <span class="ot">&lt;-</span><span class="fu">train</span>(Eye <span class="sc">~</span>., <span class="at">data =</span> training, </span>
<span id="cb36-2"><a href="other-visulization-example.html#cb36-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">&#39;gbm&#39;</span>, </span>
<span id="cb36-3"><a href="other-visulization-example.html#cb36-3" aria-hidden="true" tabindex="-1"></a>                <span class="co">#preProc = c(&quot;center&quot;, &quot;scale&quot;)</span></span>
<span id="cb36-4"><a href="other-visulization-example.html#cb36-4" aria-hidden="true" tabindex="-1"></a>                )</span></code></pre></div>
<pre><code>## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1        1.3565            -nan     0.1000    0.0102
##      2        1.3395            -nan     0.1000    0.0076
##      3        1.3240            -nan     0.1000    0.0070
##      4        1.3076            -nan     0.1000    0.0080
##      5        1.2944            -nan     0.1000    0.0060
##      6        1.2820            -nan     0.1000    0.0059
##      7        1.2688            -nan     0.1000    0.0065
##      8        1.2570            -nan     0.1000    0.0053
##      9        1.2464            -nan     0.1000    0.0046
##     10        1.2365            -nan     0.1000    0.0045
##     20        1.1593            -nan     0.1000    0.0031
##     40        1.0757            -nan     0.1000    0.0009
##     60        1.0198            -nan     0.1000    0.0013
##     80        0.9795            -nan     0.1000    0.0007
##    100        0.9417            -nan     0.1000    0.0005
##    120        0.9090            -nan     0.1000    0.0004
##    140        0.8841            -nan     0.1000    0.0003
##    150        0.8691            -nan     0.1000    0.0007</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="other-visulization-example.html#cb38-1" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span><span class="fu">Sys.time</span>()</span>
<span id="cb38-2"><a href="other-visulization-example.html#cb38-2" aria-hidden="true" tabindex="-1"></a>gbmFit1<span class="sc">$</span>results <span class="sc">%&gt;%</span><span class="fu">tibble</span>()<span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="other-visulization-example.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(Accuracy) <span class="sc">%&gt;%</span><span class="fu">max</span>() <span class="sc">%&gt;%</span><span class="fu">round</span>(., <span class="dv">3</span>)<span class="ot">-&gt;</span></span>
<span id="cb38-4"><a href="other-visulization-example.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  model_accuracy</span>
<span id="cb38-5"><a href="other-visulization-example.html#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="other-visulization-example.html#cb38-6" aria-hidden="true" tabindex="-1"></a>a1<span class="ot">&lt;-</span><span class="fu">confusionMatrix</span>(<span class="fu">predict</span>(gbmFit1, <span class="at">newdata =</span> testing), <span class="fu">as.factor</span>(testing<span class="sc">$</span>Eye))</span>
<span id="cb38-7"><a href="other-visulization-example.html#cb38-7" aria-hidden="true" tabindex="-1"></a>results_table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb38-8"><a href="other-visulization-example.html#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Methods =</span> <span class="st">&quot;first gbm method&quot;</span>, </span>
<span id="cb38-9"><a href="other-visulization-example.html#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Accuracy =</span> model_accuracy, </span>
<span id="cb38-10"><a href="other-visulization-example.html#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">Accuracy_in_test =</span> <span class="fu">round</span>(a1<span class="sc">$</span>overall[[<span class="dv">1</span>]], <span class="dv">3</span>))</span></code></pre></div>
<p>My first gbm method show accuracy in training, it is not bed. The confusion matrix report results in testing set. The Accuracy is 80%, Sensitivity is 84.9%, and Specificity is 74%.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="other-visulization-example.html#cb39-1" aria-hidden="true" tabindex="-1"></a>results_table <span class="sc">%&gt;%</span> <span class="fu">htmlTable</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-bottom: 1px solid grey; border-top: 2px solid grey;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
Methods
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
Accuracy
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
Accuracy_in_test
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
1
</td>
<td style="border-bottom: 2px solid grey; text-align: center;">
first gbm method
</td>
<td style="border-bottom: 2px solid grey; text-align: center;">
0.798
</td>
<td style="border-bottom: 2px solid grey; text-align: center;">
0.792
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="other-visulization-example.html#cb40-1" aria-hidden="true" tabindex="-1"></a>TestResult <span class="ot">&lt;-</span> <span class="fu">predict</span>(gbmFit1, <span class="at">newdata =</span> testing)</span>
<span id="cb40-2"><a href="other-visulization-example.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(TestResult, <span class="fu">as.factor</span>(testing<span class="sc">$</span>Eye))</span></code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction closed open
##     closed   1258  341
##     open      223  886
##                                           
##                Accuracy : 0.7917          
##                  95% CI : (0.7759, 0.8069)
##     No Information Rate : 0.5469          
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
##                                           
##                   Kappa : 0.5763          
##                                           
##  Mcnemar&#39;s Test P-Value : 8.368e-07       
##                                           
##             Sensitivity : 0.8494          
##             Specificity : 0.7221          
##          Pos Pred Value : 0.7867          
##          Neg Pred Value : 0.7989          
##              Prevalence : 0.5469          
##          Detection Rate : 0.4645          
##    Detection Prevalence : 0.5905          
##       Balanced Accuracy : 0.7858          
##                                           
##        &#39;Positive&#39; Class : closed          
## </code></pre>
<p>gbmFit3 creates a new summary data set with var, factors in our model, and its relative influence (rel.inf) each variable had on eye opening status. O1 and P7, F8, F7 show highest rel.infs.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="other-visulization-example.html#cb42-1" aria-hidden="true" tabindex="-1"></a>gbmFit1 <span class="sc">%&gt;%</span> <span class="fu">summary</span>()</span></code></pre></div>
<p><img src="testbook_files/figure-html/eeg%20data%20waveform%20gbmsummary-1.png" width="672" /></p>
<pre><code>##     var   rel.inf
## O1   O1 23.799686
## P7   P7 20.817368
## F8   F8 12.253765
## F7   F7  8.449242
## AF4 AF4  7.527027
## AF3 AF3  7.068717
## F4   F4  5.224236
## O2   O2  3.939794
## T8   T8  2.761357
## FC6 FC6  1.995400
## FC5 FC5  1.652006
## T7   T7  1.643377
## F3   F3  1.472344
## P8   P8  1.395682</code></pre>
<p>I search classification algorithms, and find <code>parRF</code>, <code>naive_bayes</code>, <code>knn</code>, <code>lssvmPoly</code>, <code>svmLinearWeights</code>, <code>gbm</code>, <code>brnn</code>, <code>regLogistic</code>, <code>OneR</code>, <code>RFlda</code>, <code>qda</code>, <code>glm</code>, <code>LogitBoost</code> algorithm. Among them, “parRF”, “naive_bayes”, “knn”,“svmLinearWeights”, “gbm”,“regLogistic”,“glm”,“LogitBoost” are chosen for data analysis due to some error for package install and load library in caret package. Among them, knn and gbm show higest accuracy I just compare the knn in current report.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="other-visulization-example.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb44-2"><a href="other-visulization-example.html#cb44-2" aria-hidden="true" tabindex="-1"></a>dfs <span class="ot">&lt;-</span>eegw0 <span class="sc">%&gt;%</span><span class="fu">select</span>(<span class="sc">-</span>eyeDetection, <span class="sc">-</span>sec, <span class="sc">-</span>row_n)</span>
<span id="cb44-3"><a href="other-visulization-example.html#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="other-visulization-example.html#cb44-4" aria-hidden="true" tabindex="-1"></a>trainIndex <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(dfs<span class="sc">$</span>Eye, <span class="at">p =</span> <span class="fl">0.8</span>, </span>
<span id="cb44-5"><a href="other-visulization-example.html#cb44-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">list =</span> <span class="cn">FALSE</span>, </span>
<span id="cb44-6"><a href="other-visulization-example.html#cb44-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">times=</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">as.vector</span>()</span>
<span id="cb44-7"><a href="other-visulization-example.html#cb44-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-8"><a href="other-visulization-example.html#cb44-8" aria-hidden="true" tabindex="-1"></a>training <span class="ot">&lt;-</span> dfs[ trainIndex, ]</span>
<span id="cb44-9"><a href="other-visulization-example.html#cb44-9" aria-hidden="true" tabindex="-1"></a>testing  <span class="ot">&lt;-</span> dfs[<span class="sc">-</span>trainIndex, ]</span>
<span id="cb44-10"><a href="other-visulization-example.html#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-11"><a href="other-visulization-example.html#cb44-11" aria-hidden="true" tabindex="-1"></a>fitControl <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(</span>
<span id="cb44-12"><a href="other-visulization-example.html#cb44-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 10 -fold Cross Validation</span></span>
<span id="cb44-13"><a href="other-visulization-example.html#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;repeatedcv&quot;</span>, </span>
<span id="cb44-14"><a href="other-visulization-example.html#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">number =</span> <span class="dv">10</span>,</span>
<span id="cb44-15"><a href="other-visulization-example.html#cb44-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># repeated 10 times</span></span>
<span id="cb44-16"><a href="other-visulization-example.html#cb44-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">repeats =</span> <span class="dv">10</span></span>
<span id="cb44-17"><a href="other-visulization-example.html#cb44-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb44-18"><a href="other-visulization-example.html#cb44-18" aria-hidden="true" tabindex="-1"></a>st <span class="ot">&lt;-</span><span class="fu">Sys.time</span>()</span>
<span id="cb44-19"><a href="other-visulization-example.html#cb44-19" aria-hidden="true" tabindex="-1"></a>knnFit1 <span class="ot">&lt;-</span> <span class="fu">train</span> (Eye <span class="sc">~</span> ., <span class="at">data=</span>training, </span>
<span id="cb44-20"><a href="other-visulization-example.html#cb44-20" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method    =</span> <span class="st">&#39;knn&#39;</span>, </span>
<span id="cb44-21"><a href="other-visulization-example.html#cb44-21" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#preProc = c(&quot;center&quot;, &quot;scale&quot;),</span></span>
<span id="cb44-22"><a href="other-visulization-example.html#cb44-22" aria-hidden="true" tabindex="-1"></a>                  <span class="at">trControl =</span> fitControl)</span>
<span id="cb44-23"><a href="other-visulization-example.html#cb44-23" aria-hidden="true" tabindex="-1"></a>et <span class="ot">&lt;-</span><span class="fu">Sys.time</span>()</span>
<span id="cb44-24"><a href="other-visulization-example.html#cb44-24" aria-hidden="true" tabindex="-1"></a>et<span class="sc">-</span>st</span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="other-visulization-example.html#cb45-1" aria-hidden="true" tabindex="-1"></a>knnFit1<span class="sc">$</span>results <span class="sc">%&gt;%</span><span class="fu">tibble</span>()<span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="other-visulization-example.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(Accuracy) <span class="sc">%&gt;%</span><span class="fu">max</span>() <span class="sc">%&gt;%</span><span class="fu">round</span>(., <span class="dv">3</span>)<span class="ot">-&gt;</span></span>
<span id="cb45-3"><a href="other-visulization-example.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  model_accuracy</span>
<span id="cb45-4"><a href="other-visulization-example.html#cb45-4" aria-hidden="true" tabindex="-1"></a>a6<span class="ot">&lt;-</span><span class="fu">confusionMatrix</span>(<span class="fu">predict</span>(knnFit1, <span class="at">newdata =</span> testing), <span class="fu">as.factor</span>(testing<span class="sc">$</span>Eye))</span>
<span id="cb45-5"><a href="other-visulization-example.html#cb45-5" aria-hidden="true" tabindex="-1"></a>a6</span></code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction closed open
##     closed   1441   53
##     open       40 1174
##                                           
##                Accuracy : 0.9657          
##                  95% CI : (0.9581, 0.9722)
##     No Information Rate : 0.5469          
##     P-Value [Acc &gt; NIR] : &lt;2e-16          
##                                           
##                   Kappa : 0.9306          
##                                           
##  Mcnemar&#39;s Test P-Value : 0.2134          
##                                           
##             Sensitivity : 0.9730          
##             Specificity : 0.9568          
##          Pos Pred Value : 0.9645          
##          Neg Pred Value : 0.9671          
##              Prevalence : 0.5469          
##          Detection Rate : 0.5321          
##    Detection Prevalence : 0.5517          
##       Balanced Accuracy : 0.9649          
##                                           
##        &#39;Positive&#39; Class : closed          
## </code></pre>
<p>The accuracy of knn in testing set is almost same to gbm method.</p>
<p>I trie to predict eye opening status using electronode, although I created some new variable from original data but they did not increse the model performance. The time seriese slice did not improve the model performance, either. The electrodne activity can predict eye opening statys about accuracy 94% in gbm and knn model. However I hope to test other algorithms such as <code>parRF</code>, <code>naive_bayes</code>, <code>knn</code>, <code>lssvmPoly</code>, <code>svmLinearWeights</code>, <code>gbm</code>, <code>brnn</code>, <code>regLogistic</code>, <code>OneR</code>, <code>RFlda</code>, <code>qda</code>, <code>glm</code>, <code>LogitBoost</code> in near future.</p>
</div>
</div>
</div>
<div id="mixed" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> Mixed Model<a href="other-visulization-example.html#mixed" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="introduction-2" class="section level3 hasAnchor" number="12.2.1">
<h3><span class="header-section-number">12.2.1</span> introduction<a href="other-visulization-example.html#introduction-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is summary tutor of linear mixed model. The main reference is <a href="https://ourcodingclub.github.io/tutorials/mixed-models/" class="uri">https://ourcodingclub.github.io/tutorials/mixed-models/</a></p>
<p>The data have different hierarchical or grouping characteristics like some patients from different hospitals. In that situation, the stratification analysis is most common methods to figure out exact relationship. However, the lack of power with limit sample size issue came from stratification analysis. So, When those factors all were putted in together, the mixed models were needed. Here, I summary linear mixed models here.
In current case summary, We will used covid19 data from 16th countries. The group is country level and the interesting relationship is regarded on individual economic activity and psychological symptoms. The original data are own to Laura, PH.D.</p>
</div>
<div id="data-step-1" class="section level3 hasAnchor" number="12.2.2">
<h3><span class="header-section-number">12.2.2</span> data step 1<a href="other-visulization-example.html#data-step-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>import library</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="other-visulization-example.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;tidyverse&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb47-2"><a href="other-visulization-example.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;htmlTable&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;htmlTable&quot;</span>)</span>
<span id="cb47-3"><a href="other-visulization-example.html#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;broom&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;broom&quot;</span>)</span>
<span id="cb47-4"><a href="other-visulization-example.html#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;ggthemes&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;ggthemes&quot;</span>)</span>
<span id="cb47-5"><a href="other-visulization-example.html#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co"># packages from github</span></span>
<span id="cb47-6"><a href="other-visulization-example.html#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;devtools&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb47-7"><a href="other-visulization-example.html#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb47-8"><a href="other-visulization-example.html#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="fu">install_github</span>(<span class="st">&quot;jinhaslab/tabf&quot;</span>, <span class="at">force =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## * checking for file ‘/tmp/RtmpGqUNMr/remotes6bbee33e544ad/jinhaslab-tabf-84d3e16/DESCRIPTION’ ... OK
## * preparing ‘tabf’:
## * checking DESCRIPTION meta-information ... OK
## * checking for LF line-endings in source and make files and shell scripts
## * checking for empty or unneeded directories
## * building ‘tabf_0.0.0.9000.tar.gz’</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="other-visulization-example.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tabf)</span>
<span id="cb49-2"><a href="other-visulization-example.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;readxl&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</span>
<span id="cb49-3"><a href="other-visulization-example.html#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;ggrepel&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;ggrepel&quot;</span>)</span>
<span id="cb49-4"><a href="other-visulization-example.html#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;data.table&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;data.table&quot;</span>)</span>
<span id="cb49-5"><a href="other-visulization-example.html#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;DT&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;DT&quot;</span>)</span>
<span id="cb49-6"><a href="other-visulization-example.html#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;plotly&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;plotly&quot;</span>)</span>
<span id="cb49-7"><a href="other-visulization-example.html#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;readr&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;readr&quot;</span>)</span>
<span id="cb49-8"><a href="other-visulization-example.html#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;gridExtra&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;gridExtra&quot;</span>)</span>
<span id="cb49-9"><a href="other-visulization-example.html#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;broom.mixed&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;broom.mixed&quot;</span>)</span></code></pre></div>
</div>
<div id="load-data-of-int-and-korea" class="section level3 hasAnchor" number="12.2.3">
<h3><span class="header-section-number">12.2.3</span> load data of Int and Korea<a href="other-visulization-example.html#load-data-of-int-and-korea" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>data import of international and korea</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="other-visulization-example.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#new laura data Dec 2020</span></span>
<span id="cb50-2"><a href="other-visulization-example.html#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co">#international and korea data</span></span>
<span id="cb50-3"><a href="other-visulization-example.html#cb50-3" aria-hidden="true" tabindex="-1"></a>covid <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&#39;data/covid/covid.csv&#39;</span>)</span>
<span id="cb50-4"><a href="other-visulization-example.html#cb50-4" aria-hidden="true" tabindex="-1"></a>kr_d  <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">&#39;data/covid/kr_data.XLSX&#39;</span>, <span class="at">sheet =</span> <span class="dv">1</span>)</span>
<span id="cb50-5"><a href="other-visulization-example.html#cb50-5" aria-hidden="true" tabindex="-1"></a>cbook <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">&#39;data/covid/code_book.xlsx&#39;</span>)</span>
<span id="cb50-6"><a href="other-visulization-example.html#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co"># human development index</span></span>
<span id="cb50-7"><a href="other-visulization-example.html#cb50-7" aria-hidden="true" tabindex="-1"></a>hdi <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&#39;data/covid/hdi.csv&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb50-8"><a href="other-visulization-example.html#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&#39;rank&#39;</span>, <span class="st">&#39;country&#39;</span>, <span class="st">&#39;y2019&#39;</span>, <span class="st">&#39;country_1&#39;</span>))</span></code></pre></div>
<blockquote>
<p>look up tabel for country name and number</p>
</blockquote>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="other-visulization-example.html#cb51-1" aria-hidden="true" tabindex="-1"></a>country_lkup <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">country =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">16</span>, <span class="dv">31</span>, <span class="dv">36</span>,<span class="dv">65</span>, <span class="dv">75</span>, <span class="dv">79</span>, <span class="dv">104</span>, <span class="dv">136</span>, <span class="dv">137</span>, <span class="dv">143</span>, <span class="dv">156</span>, <span class="dv">168</span>, <span class="dv">172</span>, <span class="dv">173</span>, <span class="dv">179</span>, <span class="dv">183</span>, <span class="dv">192</span>), </span>
<span id="cb51-2"><a href="other-visulization-example.html#cb51-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">country_c =</span> <span class="fu">c</span>(</span>
<span id="cb51-3"><a href="other-visulization-example.html#cb51-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;Belarus&quot;</span>, <span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;China&quot;</span>, </span>
<span id="cb51-4"><a href="other-visulization-example.html#cb51-4" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;German&quot;</span>, <span class="st">&quot;Hong Kong&quot;</span>, <span class="st">&quot;Indonesia&quot;</span>, </span>
<span id="cb51-5"><a href="other-visulization-example.html#cb51-5" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Malaysia&quot;</span>, <span class="st">&quot;Philippines&quot;</span>, <span class="st">&quot;Poland&quot;</span>, </span>
<span id="cb51-6"><a href="other-visulization-example.html#cb51-6" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Rusia&quot;</span>, <span class="st">&quot;Singapore&quot;</span>, <span class="st">&quot;Sweden&quot;</span>, </span>
<span id="cb51-7"><a href="other-visulization-example.html#cb51-7" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Thailand&quot;</span>, <span class="st">&quot;Taiwan&quot;</span>, <span class="st">&quot;Turkey&quot;</span>, </span>
<span id="cb51-8"><a href="other-visulization-example.html#cb51-8" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Ukraine&quot;</span>, <span class="st">&quot;Vietnam&quot;</span></span>
<span id="cb51-9"><a href="other-visulization-example.html#cb51-9" aria-hidden="true" tabindex="-1"></a>                             </span>
<span id="cb51-10"><a href="other-visulization-example.html#cb51-10" aria-hidden="true" tabindex="-1"></a>                           ))</span></code></pre></div>
<blockquote>
<p>overview of codebook</p>
</blockquote>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="other-visulization-example.html#cb52-1" aria-hidden="true" tabindex="-1"></a>cbook <span class="sc">%&gt;%</span> <span class="fu">datatable</span>()</span></code></pre></div>
<div id="htmlwidget-89a5e78f869e78de5f7f" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-89a5e78f869e78de5f7f">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341"],["StartDate","EndDate","Status","IPAddress","Progress","Duration (in seconds)","Finished","RecordedDate","ResponseId","RecipientLastName","RecipientFirstName","RecipientEmail","ExternalReference","LocationLatitude","LocationLongitude","DistributionChannel","UserLanguage","Q1","Q2","Q4","Q5","Q6","Q7","Q8","Q9","Q79","Q10","Q11_1","Q11_2","Q11_3","Q11_4","Q11_5","Q11_6","Q11_7","Q12","Q13","Q14","Q14_8_TEXT","Q16_1","Q16_2","Q16_3","Q16_4","Q16_5","Q16_6","Q16_7","Q16_8","Q16_9","Q16_10","Q16_11","Q16_12","Q16_13","Q16_14","Q16_15","Q16_16","Q16_17","Q16_18","Q16_19","Q16_20","Q16_21","Q16_22","Q17","Q18","Q19","Q20_1","Q20_2","Q20_3","Q20_4","Q20_5","Q20_6","Q20_7","Q20_8","Q20_9","Q20_10","Q20_11","Q20_12","Q20_13","Q20_13_TEXT","Q21","Q22","Q23","Q24","Q26","Q27_1","Q27_2","Q27_3","Q27_4","Q27_5","Q27_6","Q27_7","Q27_8","Q28","Q29","Q31_1","Q31_2","Q32","Q33","Q33_6_TEXT","Q34_1","Q34_2","Q34_3","Q34_4","Q34_5","Q34_6","Q34_7","Q34_8","Q34_9","Q34_10","Q34_11","Q34_12","Q34_13","Q34_14","Q34_15","Q34_16","Q36_1","Q36_2","Q36_3","Q36_4","Q36_5","Q36_6","Q36_7","Q37_1","Q37_2","Q37_3","Q37_4","Q37_5","Q37_6","Q37_7","Q37_8","Q37_9","Q37_10","Q37_11","Q37_12","Q37_13","Q37_14","Q37_15","Q37_16","Q37_17","Q37_18","Q39","Q40","Q40_19_TEXT","Q41_1","Q41_2","Q41_3","Q41_4","Q41_5","Q42_1","Q42_2","Q42_3","Q42_4","Q42_5","Q42_6","Q42_7","Q43","Q43_9_TEXT","Q142","Q143","Q144","Q145","Q146","Q140_1","Q44","Q45","Q45_6_TEXT","Q46_1","Q46_2","Q46_3","Q46_4","Q46_5","Q46_6","Q46_7","Q46_8","Q46_9","Q47","Q48","Q49","Q50","Q51_1","Q51_2","Q51_3","Q52","Q53","Q54","Q55","Q57","Q58","Q59","Q60_1","Q60_2","Q60_3","Q60_4","Q60_5","Q60_6","Q60_7","Q60_8","Q60_9","Q60_10","Q60_11","Q61_1","Q61_2","Q61_3","Q61_4","Q61_5","Q61_6","Q61_7","Q61_8","Q61_9","Q61_10","Q61_11","Q61_12","Q61_13","Q61_14","Q61_15","Q62","Q63","Q68_1","Q68_2","Q68_3","Q68_4","Q68_5","Q68_6","Q68_7","Q68_8","Q68_9","Q70_1","Q70_2","Q70_3","Q70_4","Q70_5","Q71_1","Q71_2","Q71_3","Q71_4","Q72","Q72_11_TEXT","Q73","Q73_11_TEXT","Q138","Q74","Q74_13_TEXT","Q75","Q76","Q77","Q80","Q81","Q82","Q83","Q83_7_TEXT","Q84","Q84_8_TEXT","Q85","Q86","Q86_7_TEXT","Q87","Q87_6_TEXT","Q88","Q88_5_TEXT","Q89","Q89_6_TEXT","Q90","Q90_6_TEXT","Q91","Q91_5_TEXT","Q92","Q92_6_TEXT","Q93","Q93_6_TEXT","Q94","Q154","Q95","Q95_8_TEXT","Q96","Q97","Q98","Q99","Q100","Q101","Q102","Q103","Q104","Q105","Q106","Q107","Q108","Q109","Q153","Q139","Q110","SC0","SC1","SC2","SC3","SC4","SC5","SC6","SC7","SC8","SC9","SC10","SC11","SC12","SC13","SC14","SC15","SC16","SC17","SC18","SC19","SC20","SC21","SC22","SC23","SC24","SC25","SC26","SC27","SC28","SC29","SC30","SC31","SC32","opp","QPMID","RISN","rid","V","psid","PID","K2","med","gid","sname","Q_TotalDuration","Q_Language","Q_URL","Source","gc","term","Age","LS","selfvsother"],["Start Date","End Date","Response Type","IP Address","Progress","Duration (in seconds)","Finished","Recorded Date","Response ID","Recipient Last Name","Recipient First Name","Recipient Email","External Data Reference","Location Latitude","Location Longitude","Distribution Channel","User Language","Understanding Decision making About Coronavirus \r\nThe purpose of this study is to investigate how people make decisions about coping with the current Coronavirus (COVID-19) pandemic. \r\nWe expect the entire survey to take 15-20 minutes to complete. You may save your responses and come back to the survey within one week after you have started it. \r\n\r\nCompensationYou will be compensated the amount you agreed upon before you entered into the survey.\r\n Confidentiality\r\nYour responses will not be linked to your identity and cannot be identified in any reports on this survey. We recommend that you complete it in a private space where nobody else can see your responses.\r\n\r\nParticipation &amp; Consent\r\nYour participation in this study is voluntary. You may refuse to answer any survey question without affecting your study compensation.\r\n\r\nBy checking the box below, you have indicated that you have read and understood the above information, and that you agree to participate in this study.\r\n\r\nContact Information\r\nQuestions, comments, or concerns about this research study can be directed to Twila Tardif, email: twila@umich.edu.\r\nIf you have questions about your rights as a research participant, or wish to obtain information, ask questions or discuss any concerns about this study with someone other than the researcher(s), please contact the University of Michigan Health Sciences and Behavioral Sciences Institutional Review Board (IRB-HSBS) , 2800 Plymouth Rd., Building 520, Room 1169 , Ann Arbor, MI 48109-2800 , Phone: 734-936-0933 , Fax: 734-936-1852 , Email: irbhsbs@umich.edu. eResearch ID: HUM00168677","List of Countries","What is your postal (zip) code?","What region do you live in? (Russia and Belarus)","What is the population of your residence? (Russia and Belarus)","Where do you live? (Russia and Belarus)","Other countries","In which countries have you lived for 6 months or more? (Select all that apply - if using a computer hold down the CTRL or Command key)","What is your year of birth?","What is your sex?","Who do you live with? (Select all that apply.) - I live alone","Who do you live with? (Select all that apply.) - I live with children","Who do you live with? (Select all that apply.) - I live with my parents","Who do you live with? (Select all that apply.) - I live with other family members (e.g., aunt, uncle, siblings)","Who do you live with? (Select all that apply.) - I live with a spouse or common-law partner","Who do you live with? (Select all that apply.) - I live with non-family members","Who do you live with? (Select all that apply.) - Prefer not to say","How many children, aged 25 or below, are currently living in your household?","Which of the following describes the children in your household?(Please select all that apply)","What are your current concerns about your children during the COVID-19 pandemic? - Selected Choice","What are your current concerns about your children during the COVID-19 pandemic? - Other - Text","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Restricted gatherings to small number of people","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Restricted gatherings to people in immediate household","What action has your government (local or national) enacted to restrict the spread of COVID-19? - \"Work from home\" for all but essential personnel","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Closed schools","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Closed places of worship","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Closed gyms or exercise facilities","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Closed restaurants/bars","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Restaurants/bars take-out only","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Seating restrictions inside restaurants","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Limited hours for grocery stores and pharmacies","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Limited number of people inside stores","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Arrows/marks on public floors to restrict foot traffic","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Closed playgrounds and parks","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Required face masks in all public places","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Explicit permission needed to leave the home","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Limited number of people leaving your home","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Provide a route indicating where you will go","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Mandatory testing for COVID-19","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Curfews","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Restricted days for driving","What action has your government (local or national) enacted to restrict the spread of COVID-19? - Restricted travel in/out of my city","What action has your government (local or national) enacted to restrict the spread of COVID-19? - 14-days mandatory isolation for new arrivals to my city/country","Which of the following steps have you taken to try to minimize the spread of the COVID-19 in your community? (Select all that apply.)","To what extent are you currently \"social distancing\" (i.e., avoiding contact and maintaining at least 6 feet/2 meters between you and individuals outside your household)?","To what extent do you think others in your community are currently \"social distancing\" (i.e., avoiding contact and maintaining at least 6 feet/2 meters between you and individuals outside your household)?","Have you changed the way you celebrate any of the following events? - Birthdays","Have you changed the way you celebrate any of the following events? - Cinco de Mayo","Have you changed the way you celebrate any of the following events? - Easter","Have you changed the way you celebrate any of the following events? - Funerals","Have you changed the way you celebrate any of the following events? - May 1st","Have you changed the way you celebrate any of the following events? - Nouruz","Have you changed the way you celebrate any of the following events? - Passover","Have you changed the way you celebrate any of the following events? - Ramadan","Have you changed the way you celebrate any of the following events? - Songkran","Have you changed the way you celebrate any of the following events? - Qingming","Have you changed the way you celebrate any of the following events? - Graduation","Have you changed the way you celebrate any of the following events? - Valentine's Day","Have you changed the way you celebrate any of the following events? - Other","Have you changed the way you celebrate any of the following events? - Other - Text","How long do you think you will be able to maintain your current level of social distancing?","How difficult is it for you to maintain your current level of social distancing?","When do you think your community will be \"safe\" from the COVID-19 pandemic?","What happens if you violate government guidelines on social distancing? (Select all that apply)","Have you experienced any difficulties during the COVID-19 crisis? (Select all that apply)","The Coronavirus (COVID-19) crisis has changed or impacted... - My plans for the future.","The Coronavirus (COVID-19) crisis has changed or impacted... - My material circumstances.","The Coronavirus (COVID-19) crisis has changed or impacted... - The activities I engage in.","The Coronavirus (COVID-19) crisis has changed or impacted... - The people I spend time with.","The Coronavirus (COVID-19) crisis has changed or impacted... - Where I live.","The Coronavirus (COVID-19) crisis has changed or impacted... - My attitudes about life.","The Coronavirus (COVID-19) crisis has changed or impacted... - The way I think about things.","The Coronavirus (COVID-19) crisis has changed or impacted... - My mental health.","The frequency and/or intensity of arguments my partner and I have experienced since the COVID-19 crisis began has:","The frequency and/or intensity of arguments my other family members and I have experienced since the COVID-19 crisis began has:","Compared to before the COVID pandemic, how has my news media consumption changed? - At the beginning of the pandemic","Compared to before the COVID pandemic, how has my news media consumption changed? - Currently","About how much time do you currently spend consuming news media coverage of COVID-19 each day?","What sources do you use to obtain reliable information about COVID-19? (Select all that apply) - Selected Choice","What sources do you use to obtain reliable information about COVID-19? (Select all that apply) - Other (specify) - Text","How much do you agree with the following statements about COVID-19 (Coronavirus)? - It only affects older people.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - It has a higher death rate for people over 70.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - Children and teenagers are immune from it.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - It is no different from seasonal flu.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - My government is over-reporting the number of people who have died from it.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - My government is under-reporting the number of people who have died from it.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - It will kill more people than the flu this year.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - The World Health Organization (WHO) has exaggerated the danger of COVID-19.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - A vaccine for it is likely to be available to me within the next six months.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - It originated in a\r\n laboratory doing research on biological warfare.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - It originated in animals.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - I could catch it if someone infected with it coughs on me.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - It will stay in the air for several hours after someone coughs or sneezes.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - It's important to avoid touching any surface that people outside my household may have touched.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - International news is more reliable than my national news for information about it.","How much do you agree with the following statements about COVID-19 (Coronavirus)? - The symptoms of it seem to be connected to 5G mobile network radiation.","How much have you been feeling the following emotions during the pandemic, relative to how much you experienced them before the pandemic? - Lonely","How much have you been feeling the following emotions during the pandemic, relative to how much you experienced them before the pandemic? - Depressed","How much have you been feeling the following emotions during the pandemic, relative to how much you experienced them before the pandemic? - Anxious","How much have you been feeling the following emotions during the pandemic, relative to how much you experienced them before the pandemic? - Angry","How much have you been feeling the following emotions during the pandemic, relative to how much you experienced them before the pandemic? - Happy","How much have you been feeling the following emotions during the pandemic, relative to how much you experienced them before the pandemic? - Relaxed","How much have you been feeling the following emotions during the pandemic, relative to how much you experienced them before the pandemic? - Focused","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Working/doing schoolwork.","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Using alcohol or other drugs.","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Eating due to stress or boredom.","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Seeking emotional support from others.","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Helping others","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Feeling grateful","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Engaging in creative activities","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Journaling","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Sharing funny memes and videos.","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Sleeping","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Exercising.","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Praying or meditating.","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Watching movies/TV","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Spending time on social media.","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Reading/listening to the news.","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Avoiding the news.","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Playing games","How much have you been doing the following actions during the pandemic, relative to how much you did them before the pandemic? - Connecting with family/friends","In general, how is your health?","Which of the following chronic health conditions do you have? Check all that apply (even if controlled with medication) - Selected Choice","Which of the following chronic health conditions do you have? Check all that apply (even if controlled with medication) - Other (Specify) - Text","Are you currently (today) experiencing any of the following? - Problems walking","Are you currently (today) experiencing any of the following? - Problems washing or dressing","Are you currently (today) experiencing any of the following? - Problems with daily activities (e.g., school, work, housework, family, or leisure activities)","Are you currently (today) experiencing any of the following? - Pain or discomfort","Are you currently (today) experiencing any of the following? - Anxiety/Depression","Which of these physical symptoms have you experienced in the past (1) month? - Headaches","Which of these physical symptoms have you experienced in the past (1) month? - Sick to my stomach","Which of these physical symptoms have you experienced in the past (1) month? - Heart beating fast","Which of these physical symptoms have you experienced in the past (1) month? - Hard to breathe","Which of these physical symptoms have you experienced in the past (1) month? - Feel so restless I can't sit still","Which of these physical symptoms have you experienced in the past (1) month? - Muscles feel tense or sore","Which of these physical symptoms have you experienced in the past (1) month? - Problems sleeping","In the past 3 months, have you had any of the following symptoms? - Selected Choice","In the past 3 months, have you had any of the following symptoms? - Other (please describe) - Text","What would you say is your mobility and ability to move around TODAY? (Russian and Belarus only)","What would you say is your ability to take care of yourself TODAY: (Russia and Belarus only)","What would you say about your daily activities (e.g. work, study, housework, family business, entertainment) TODAY: (Russia and Belarus only)","What would you say about your feeling of pain or discomfort TODAY: (Russia and Belarus only)","What would you say about your feeling of anxiety or depression TODAY: (Russia and Belarus only)","Before you is a scale from 0 to 100.\r\n\r\n \r\n\r\n100 (right on the scale) represents the very best state of health which you can imagine, 0 (left on the scale) is the absolute worst state of health that you can imagine. - Choose the point that reflects your health today.","Have you ever had, or suspected you might have, the Coronavirus (COVID-19)?","Which of the following best describes your situation? - Selected Choice","Which of the following best describes your situation? - Other (specify) - Text","If I wanted to get a COVID-19 test, I could do this at (select all that apply) - Public clinic or hospital","If I wanted to get a COVID-19 test, I could do this at (select all that apply) - Private clinic or hospital","If I wanted to get a COVID-19 test, I could do this at (select all that apply) - Pharmacy","If I wanted to get a COVID-19 test, I could do this at (select all that apply) - At my workplace","If I wanted to get a COVID-19 test, I could do this at (select all that apply) - Self-test","If I wanted to get a COVID-19 test, I could do this at (select all that apply) - Only if life-threatening symptoms","If I wanted to get a COVID-19 test, I could do this at (select all that apply) - If getting treatment for other conditions","If I wanted to get a COVID-19 test, I could do this at (select all that apply) - Would not be able to be tested","If I wanted to get a COVID-19 test, I could do this at (select all that apply) - Don't know","Do you regularly update your vaccinations for diseases present in your area?","Do you follow the recommended schedule of vaccines for your child(ren)?","If a vaccine for COVID-19 was made available to you at no cost, would you get it?","Has anyone you know ever been suspected or confirmed to have Coronavirus (COVID-19)?","The following questions include beliefs about how much control we have over our likelihood of becoming ill with COVID-19. Please state how much you agree with each statement. - I have very little control over whether or not I become ill with COVID-19.","The following questions include beliefs about how much control we have over our likelihood of becoming ill with COVID-19. Please state how much you agree with each statement. - Whether or not I become seriously ill is up to fate.","The following questions include beliefs about how much control we have over our likelihood of becoming ill with COVID-19. Please state how much you agree with each statement. - Whatever happens is God's will.","To what extent are you concerned about your personal risk of being infected with COVID-19?","To what extent are you concerned about your loved ones being infected with COVID-19?","I am concerned that if I were infected with COVID-19, it may create a great burden for my family.","I am concerned that if I were infected with COVID-19, it may cause others to devalue or discriminate against me.","Generally speaking, would you say that most people can be trusted, or that you can’t be too careful in dealing with people?","Do you think that most people would try to take advantage of you if they got the chance, or would they try to be fair?","Would you say that most of the time people try to be helpful or that they are mostly looking out for themselves?","In general, how much do you trust each of the following groups of people? - People in your family?","In general, how much do you trust each of the following groups of people? - People in your community?","In general, how much do you trust each of the following groups of people? - People you work or go to school with?","In general, how much do you trust each of the following groups of people? - People who speak a different language?","In general, how much do you trust each of the following groups of people? - People of another nationality?","In general, how much do you trust each of the following groups of people? - People of another religion?","In general, how much do you trust each of the following groups of people? - Doctors, nurses and other medical practitioners?","In general, how much do you trust each of the following groups of people? - Religious leaders?","In general, how much do you trust each of the following groups of people? - Scientists?","In general, how much do you trust each of the following groups of people? - Politicians?","In general, how much do you trust each of the following groups of people? - Journalists?","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - World Health Organization (WHO)","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - My country's national health organization or Ministry of Health (e.g., CDC, PHAC)","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - Non-governmental aid organizations (NGOs)","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - Religious organizations","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - Religious leaders","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - Top leader of my country's government","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - US President","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - China's President","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - My national government","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - My governor","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - My provincial leader","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - My district or regional government","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - My local government","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - My local health department","In general, how much confidence do you have in the following organizations or individuals information about and handling of the Coronavirus? - My employer","If you believe that \"China\" should be blamed for the COVID-19 pandemic, who specifically do you blame? (Check all that apply)","If you believe that \"the U.S.\" should be blamed for the COVID-19 pandemic, who specifically do you blame? (Check all that apply)","How much do you agree with the following statements about who is responsible for the COVID-19 pandemic. - China is responsible","How much do you agree with the following statements about who is responsible for the COVID-19 pandemic. - The U.S. is responsible","How much do you agree with the following statements about who is responsible for the COVID-19 pandemic. - Italy is responsible","How much do you agree with the following statements about who is responsible for the COVID-19 pandemic. - The WHO (World Health Organization) is responsible","How much do you agree with the following statements about who is responsible for the COVID-19 pandemic. - Countries that failed to prepare for an outbreak are responsible","How much do you agree with the following statements about who is responsible for the COVID-19 pandemic. - People who do not follow social distancing guidelines are responsible","How much do you agree with the following statements about who is responsible for the COVID-19 pandemic. - The U.S. military planted the COVID-19 virus in China.","How much do you agree with the following statements about who is responsible for the COVID-19 pandemic. - The COVID-19 virus originated in a Chinese lab.","How much do you agree with the following statements about who is responsible for the COVID-19 pandemic. - China should compensate other countries for damages caused by the pandemic.","I see myself as... - Extroverted, enthusiastic","I see myself as... - Critical, quarrelsome","I see myself as... - Dependable, self-disciplined","I see myself as... - Anxious, easily upset","I see myself as... - Open to new experiences, creative","Compared to before the Coronavirus pandemic, how often do these things happen to you? - Treated with courtesy or respect","Compared to before the Coronavirus pandemic, how often do these things happen to you? - Received poorer service than others","Compared to before the Coronavirus pandemic, how often do these things happen to you? - Threatened or harassed","Compared to before the Coronavirus pandemic, how often do these things happen to you? - Strangers displayed negative reactions to you","Indicate your race/ethnic identity (check all that apply) - Selected Choice","Indicate your race/ethnic identity (check all that apply) - Other - Text","Indicate your race/ethnic identity (check all that apply) - Selected Choice","Indicate your race/ethnic identity (check all that apply) - Other - Text","What is your ethnicity? (Russia, Ukraine, Belarus)","What is your current religion, if any? (Select all that apply) - Selected Choice","What is your current religion, if any? (Select all that apply) - Other - Text","How important is religion in your life?","Thinking of religion, how serious is the conflict between people who are very religious and people who are not very religious in your country?","Do you think this conflict has changed since the COVID-19 outbreak?","What is the highest level of education you have completed?","Father's educational level","Mother's educational level","Which of these parties did you support in the last election? (Thailand) - Selected Choice","Which of these parties did you support in the last election? (Thailand) - Other - Text","Which presidential candidate did you support in the 2016 election? (the Philippines) - Selected Choice","Which presidential candidate did you support in the 2016 election? (the Philippines) - Other - Text","Which presidential candidate did you support in the last election? (Indonesia)","Which party do you most closely identify with? (Malaysia) - Selected Choice","Which party do you most closely identify with? (Malaysia) - Other - Text","Which of these parties did you support in the last election? (Myanmar) - Selected Choice","Which of these parties did you support in the last election? (Myanmar) - Other - Text","Who do you expect to vote for in the 2020 presidential election? (U.S.) - Selected Choice","Who do you expect to vote for in the 2020 presidential election? (U.S.) - Other - Text","Which of these parties did you support in the last election? (Canada) - Selected Choice","Which of these parties did you support in the last election? (Canada) - Other  - Text","Which presidential candidate did you support in the last election? (Taiwan) - Selected Choice","Which presidential candidate did you support in the last election? (Taiwan) - Other - Text","Which of these parties did you support in the last election? (Singapore) - Selected Choice","Which of these parties did you support in the last election? (Singapore) - Other - Text","Which of these parties did you support in the last election? (Sweden) - Selected Choice","Which of these parties did you support in the last election? (Sweden) - Other - Text","Which of these parties did you support in the last parliamentary election? (Poland) - Selected Choice","Which of these parties did you support in the last parliamentary election? (Poland) - Other - Text","Which statement best describes your current employment status? (check all that apply)","Which statement best describes your current employment status? (check all that apply)","What measures, if any, has your government enacted to financially support individuals or businesses during the COVID-19 pandemic? (Select all that apply) - Selected Choice","What measures, if any, has your government enacted to financially support individuals or businesses during the COVID-19 pandemic? (Select all that apply) - Other - Text","Which of the following statements most accurately reflects the financial situation of your family before COVID-related policies took effect?","Annual family income (U.S.)","Annual family income (Singapore)","Annual family income (Hong Kong)","Annual family income (Taiwan)","Monthly family income (Viet Nam)","Monthly family income (Turkey)","Annual family income (the Philippines)","Annual family income (Sweden)","Annual family income (Thailand)","Annual family income (Indonesia)","Annual family income (Malaysia)","Annual family income (mainland China)","Annual family income (Canada)","Annual family income (Poland)","What is your monthly income in your national currency)? (Belarus, Russia, Ukraine)","Please let us know if there are any additional concerns or thoughts you might have regarding the current Coronavirus crisis and how people make decisions about their own and others' safety.","COVID Prevention government actions - current","COVID Prevention self actions","Health Problems","Trust - people","COVID Prevention government actions - past","Other countries lived in","Concerns about children","COVID impact","COVID fact","COVID conspiracy","COVID suspicion","Past month - positive emotion","Past month - ways to cope","Past month - negative emotion","Past month - physical symptoms","Health - symptoms","COVID control beliefs","Trust - generalized","Trust - organization","COVID discrimination","China blame","US blame","China responsible","US responsible","Other responsible","Big 5 - openness","Big 5 - conscientiousness","Big 5 - extroversion","Big 5 - agreeableness","Big 5 - neuroticism","COVID - difficulties","Household_number - Before COVID","Household_number - During COVID","opp","QPMID","RISN","rid","V","psid","PID","K2","med","gid","sname","Q_TotalDuration","Q_Language","Q_URL","Source","gc","term","Age","LS","selfvsother"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>variables<\/th>\n      <th>question<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<blockquote>
<p>Korea Data step for value and variable standardization</p>
</blockquote>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="other-visulization-example.html#cb53-1" aria-hidden="true" tabindex="-1"></a>kr_d1 <span class="ot">&lt;-</span> kr_d <span class="sc">%&gt;%</span></span>
<span id="cb53-2"><a href="other-visulization-example.html#cb53-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(<span class="st">&#39;IDnum&#39;</span> <span class="ot">=</span> No, <span class="st">&#39;age&#39;</span> <span class="ot">=</span> SQ2, <span class="st">&#39;gender&#39;</span> <span class="ot">=</span> SQ1, <span class="st">&#39;Education&#39;</span>  <span class="ot">=</span> DQ1,</span>
<span id="cb53-3"><a href="other-visulization-example.html#cb53-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">contains</span>(<span class="st">&#39;DQ2&#39;</span>), <span class="co"># employment status</span></span>
<span id="cb53-4"><a href="other-visulization-example.html#cb53-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;EmoDep&#39;</span>  <span class="ot">=</span> Q18_2, <span class="co"># for int Q36_2 how much have you feeling</span></span>
<span id="cb53-5"><a href="other-visulization-example.html#cb53-5" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;EmoAnx&#39;</span>  <span class="ot">=</span> Q18_3, <span class="co"># for int Q36_3</span></span>
<span id="cb53-6"><a href="other-visulization-example.html#cb53-6" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;ChrDep&#39;</span>  <span class="ot">=</span> Q21_10, <span class="co"># for int Q40_17</span></span>
<span id="cb53-7"><a href="other-visulization-example.html#cb53-7" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;ChrAnx&#39;</span>  <span class="ot">=</span> Q21_11, <span class="co"># for int Q40_18</span></span>
<span id="cb53-8"><a href="other-visulization-example.html#cb53-8" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;ToDepAnx&#39;</span><span class="ot">=</span> Q22_5, <span class="co"># for int Q41_5, </span></span>
<span id="cb53-9"><a href="other-visulization-example.html#cb53-9" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;dfLossJob&#39;</span> <span class="ot">=</span> Q10_10, <span class="co"># for int Q26_9,</span></span>
<span id="cb53-10"><a href="other-visulization-example.html#cb53-10" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;dfReduIcm&#39;</span> <span class="ot">=</span> Q10_3, <span class="co"># for int Q26_3, </span></span>
<span id="cb53-11"><a href="other-visulization-example.html#cb53-11" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;dfIncAnx&#39;</span>  <span class="ot">=</span> Q10_5 <span class="co"># for int Q26_5  </span></span>
<span id="cb53-12"><a href="other-visulization-example.html#cb53-12" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">%&gt;%</span></span>
<span id="cb53-13"><a href="other-visulization-example.html#cb53-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="dv">200</span>, <span class="at">country_c =</span> <span class="st">&#39;South Korea&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb53-14"><a href="other-visulization-example.html#cb53-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_if</span>(is.numeric, <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(.x), <span class="dv">0</span>, .x) ) <span class="sc">%&gt;%</span></span>
<span id="cb53-15"><a href="other-visulization-example.html#cb53-15" aria-hidden="true" tabindex="-1"></a> <span class="fu">as.data.frame</span>()</span></code></pre></div>
<blockquote>
<p>international data mutate</p>
</blockquote>
<p>international Data step</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="other-visulization-example.html#cb54-1" aria-hidden="true" tabindex="-1"></a>int_d1 <span class="ot">&lt;-</span> covid <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="other-visulization-example.html#cb54-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="st">&#39;age&#39;</span> <span class="ot">=</span> <span class="dv">2020</span> <span class="sc">-</span> Q79) <span class="sc">%&gt;%</span></span>
<span id="cb54-3"><a href="other-visulization-example.html#cb54-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">IDnum =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb54-4"><a href="other-visulization-example.html#cb54-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(IDnum,</span>
<span id="cb54-5"><a href="other-visulization-example.html#cb54-5" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;age&#39;</span>,</span>
<span id="cb54-6"><a href="other-visulization-example.html#cb54-6" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;gender&#39;</span> <span class="ot">=</span> Q10, <span class="st">&#39;Education&#39;</span>  <span class="ot">=</span> Q80,</span>
<span id="cb54-7"><a href="other-visulization-example.html#cb54-7" aria-hidden="true" tabindex="-1"></a>             <span class="fu">contains</span>(<span class="st">&#39;Q94&#39;</span>), <span class="co"># employment status</span></span>
<span id="cb54-8"><a href="other-visulization-example.html#cb54-8" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;EmoDep&#39;</span>  <span class="ot">=</span> Q36_2, </span>
<span id="cb54-9"><a href="other-visulization-example.html#cb54-9" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;EmoAnx&#39;</span>  <span class="ot">=</span> Q36_3,</span>
<span id="cb54-10"><a href="other-visulization-example.html#cb54-10" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;ChrDep&#39;</span>  <span class="ot">=</span> Q40_17,</span>
<span id="cb54-11"><a href="other-visulization-example.html#cb54-11" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;ChrAnx&#39;</span>  <span class="ot">=</span> Q40_18,</span>
<span id="cb54-12"><a href="other-visulization-example.html#cb54-12" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;ToDepAnx&#39;</span><span class="ot">=</span> Q41_5, </span>
<span id="cb54-13"><a href="other-visulization-example.html#cb54-13" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;dfLossJob&#39;</span> <span class="ot">=</span> Q26_9,</span>
<span id="cb54-14"><a href="other-visulization-example.html#cb54-14" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;dfReduIcm&#39;</span> <span class="ot">=</span> Q26_3, </span>
<span id="cb54-15"><a href="other-visulization-example.html#cb54-15" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;dfIncAnx&#39;</span>  <span class="ot">=</span> Q26_5, </span>
<span id="cb54-16"><a href="other-visulization-example.html#cb54-16" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;country&#39;</span> <span class="ot">=</span> Q2</span>
<span id="cb54-17"><a href="other-visulization-example.html#cb54-17" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">%&gt;%</span></span>
<span id="cb54-18"><a href="other-visulization-example.html#cb54-18" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb54-19"><a href="other-visulization-example.html#cb54-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">left_join</span>(country_lkup,  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;country&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb54-20"><a href="other-visulization-example.html#cb54-20" aria-hidden="true" tabindex="-1"></a>   <span class="fu">select</span>(<span class="sc">-</span>Q94_18, <span class="sc">-</span>Q94_19)</span></code></pre></div>
<blockquote>
<p>Harmonizing Variable name between Korea and International Data</p>
</blockquote>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="other-visulization-example.html#cb55-1" aria-hidden="true" tabindex="-1"></a>em_lkup <span class="ot">=</span> <span class="fu">tibble</span>(</span>
<span id="cb55-2"><a href="other-visulization-example.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;kr&#39;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;DQ2_1&#39;</span>, <span class="st">&#39;DQ2_2&#39;</span>, <span class="st">&#39;DQ2_3&#39;</span>, <span class="st">&#39;DQ2_4&#39;</span>, <span class="st">&#39;DQ2_5&#39;</span>, <span class="st">&#39;DQ2_6&#39;</span>, <span class="st">&#39;DQ2_7&#39;</span>, </span>
<span id="cb55-3"><a href="other-visulization-example.html#cb55-3" aria-hidden="true" tabindex="-1"></a>           <span class="st">&#39;DQ2_8&#39;</span>,<span class="st">&#39;DQ2_9&#39;</span>,<span class="st">&#39;DQ2_10&#39;</span>,<span class="st">&#39;DQ2_11&#39;</span>,<span class="st">&#39;DQ2_12&#39;</span>,<span class="st">&#39;DQ2_13&#39;</span>,<span class="st">&#39;DQ2_14&#39;</span>), </span>
<span id="cb55-4"><a href="other-visulization-example.html#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;int&#39;</span> <span class="ot">=</span><span class="fu">c</span>(<span class="st">&#39;Q94_9&#39;</span>, <span class="st">&#39;Q94_2&#39;</span>,    <span class="st">&#39;Q94_3&#39;</span>,    <span class="st">&#39;Q94_4&#39;</span>,    <span class="st">&#39;Q94_7&#39;</span>,    <span class="st">&#39;Q94_8&#39;</span>,    <span class="st">&#39;Q94_5&#39;</span>,    <span class="st">&#39;Q94_12&#39;</span>,   <span class="st">&#39;Q94_14&#39;</span>,   <span class="st">&#39;Q94_15&#39;</span>,   <span class="st">&#39;Q94_1&#39;</span>,    <span class="st">&#39;Q94_6&#39;</span>,    <span class="st">&#39;Q94_16&#39;</span>,   <span class="st">&#39;Q94_17&#39;</span>)</span>
<span id="cb55-5"><a href="other-visulization-example.html#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="other-visulization-example.html#cb55-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb55-7"><a href="other-visulization-example.html#cb55-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-8"><a href="other-visulization-example.html#cb55-8" aria-hidden="true" tabindex="-1"></a>kr_d2<span class="ot">&lt;-</span> kr_d1 <span class="sc">%&gt;%</span></span>
<span id="cb55-9"><a href="other-visulization-example.html#cb55-9" aria-hidden="true" tabindex="-1"></a>plyr<span class="sc">::</span><span class="fu">rename</span>(<span class="fu">setNames</span>(em_lkup<span class="sc">$</span>int, em_lkup<span class="sc">$</span>kr)) <span class="co"># change kr variable names to int variable names. </span></span>
<span id="cb55-10"><a href="other-visulization-example.html#cb55-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-11"><a href="other-visulization-example.html#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="co"># colnames(kr_d2)   == colnames(int_d1) # it returns TRUE value for all col names</span></span></code></pre></div>
</div>
<div id="data-merge" class="section level3 hasAnchor" number="12.2.4">
<h3><span class="header-section-number">12.2.4</span> data merge<a href="other-visulization-example.html#data-merge" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="other-visulization-example.html#cb56-1" aria-hidden="true" tabindex="-1"></a>mm <span class="ot">&lt;-</span> <span class="fu">rbind</span>(int_d1, kr_d2)</span>
<span id="cb56-2"><a href="other-visulization-example.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mm)</span></code></pre></div>
<pre><code>## [1] 19270</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="other-visulization-example.html#cb58-1" aria-hidden="true" tabindex="-1"></a>mm <span class="ot">&lt;-</span> mm <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>(age)</span>
<span id="cb58-2"><a href="other-visulization-example.html#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mm) </span></code></pre></div>
<pre><code>## [1] 16942</code></pre>
<blockquote>
<p>data mutate</p>
</blockquote>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="other-visulization-example.html#cb60-1" aria-hidden="true" tabindex="-1"></a>krtoint <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb60-2"><a href="other-visulization-example.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">=</span> <span class="fu">ifelse</span>(x<span class="sc">&lt;</span><span class="dv">4</span>, x<span class="sc">+</span><span class="dv">4</span>, x)</span>
<span id="cb60-3"><a href="other-visulization-example.html#cb60-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb60-4"><a href="other-visulization-example.html#cb60-4" aria-hidden="true" tabindex="-1"></a>logictozero<span class="ot">=</span> <span class="cf">function</span>(x){</span>
<span id="cb60-5"><a href="other-visulization-example.html#cb60-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">=</span> <span class="fu">as.numeric</span>(x <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb60-6"><a href="other-visulization-example.html#cb60-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb60-7"><a href="other-visulization-example.html#cb60-7" aria-hidden="true" tabindex="-1"></a>mm1 <span class="ot">&lt;-</span>mm <span class="sc">%&gt;%</span></span>
<span id="cb60-8"><a href="other-visulization-example.html#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&gt;</span><span class="dv">20</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span><span class="dv">65</span>) <span class="sc">%&gt;%</span></span>
<span id="cb60-9"><a href="other-visulization-example.html#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(gender <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb60-10"><a href="other-visulization-example.html#cb60-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>((EmoDep <span class="sc">==-</span><span class="dv">99</span>)<span class="sc">|</span>(EmoAnx <span class="sc">==-</span><span class="dv">99</span>)<span class="sc">|</span>(dfLossJob<span class="sc">==-</span><span class="dv">99</span>)<span class="sc">|</span>(Q94_3<span class="sc">==-</span><span class="dv">99</span>)<span class="sc">|</span>(Q94_4 <span class="sc">==-</span><span class="dv">99</span>)))<span class="sc">%&gt;%</span></span>
<span id="cb60-11"><a href="other-visulization-example.html#cb60-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">dfLossJob =</span> <span class="fu">ifelse</span>(dfLossJob <span class="sc">==</span><span class="dv">10</span>, <span class="dv">1</span>, dfLossJob)) <span class="sc">%&gt;%</span></span>
<span id="cb60-12"><a href="other-visulization-example.html#cb60-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">Q94_3 =</span> <span class="fu">ifelse</span>(<span class="sc">!</span>Q94_3 <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb60-13"><a href="other-visulization-example.html#cb60-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">Q94_4 =</span> <span class="fu">ifelse</span>(<span class="sc">!</span>Q94_4 <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb60-14"><a href="other-visulization-example.html#cb60-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb60-15"><a href="other-visulization-example.html#cb60-15" aria-hidden="true" tabindex="-1"></a>mm12<span class="ot">&lt;-</span> mm1 <span class="sc">%&gt;%</span></span>
<span id="cb60-16"><a href="other-visulization-example.html#cb60-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">EmoDep =</span><span class="fu">krtoint</span>(EmoDep), </span>
<span id="cb60-17"><a href="other-visulization-example.html#cb60-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">EmoAnx =</span><span class="fu">krtoint</span>(EmoAnx), </span>
<span id="cb60-18"><a href="other-visulization-example.html#cb60-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">ToDepAnx=</span><span class="fu">ifelse</span>(ToDepAnx <span class="sc">==</span> <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb60-19"><a href="other-visulization-example.html#cb60-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">&#39;ChrDep&#39;</span>, <span class="st">&#39;ChrAnx&#39;</span>, <span class="st">&#39;dfLossJob&#39;</span>,<span class="st">&#39;dfReduIcm&#39;</span>,<span class="st">&#39;dfIncAnx&#39;</span> ))</span>
<span id="cb60-20"><a href="other-visulization-example.html#cb60-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-21"><a href="other-visulization-example.html#cb60-21" aria-hidden="true" tabindex="-1"></a>mm13 <span class="ot">&lt;-</span> mm1 <span class="sc">%&gt;%</span></span>
<span id="cb60-22"><a href="other-visulization-example.html#cb60-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">&#39;ChrDep&#39;</span>, <span class="st">&#39;ChrAnx&#39;</span>, <span class="st">&#39;dfLossJob&#39;</span>,<span class="st">&#39;dfReduIcm&#39;</span>,<span class="st">&#39;dfIncAnx&#39;</span> )) <span class="sc">%&gt;%</span></span>
<span id="cb60-23"><a href="other-visulization-example.html#cb60-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(., logictozero) <span class="sc">%&gt;%</span></span>
<span id="cb60-24"><a href="other-visulization-example.html#cb60-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>()</span>
<span id="cb60-25"><a href="other-visulization-example.html#cb60-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-26"><a href="other-visulization-example.html#cb60-26" aria-hidden="true" tabindex="-1"></a>mm2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(mm12, mm13)</span>
<span id="cb60-27"><a href="other-visulization-example.html#cb60-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-28"><a href="other-visulization-example.html#cb60-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb60-29"><a href="other-visulization-example.html#cb60-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-30"><a href="other-visulization-example.html#cb60-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-31"><a href="other-visulization-example.html#cb60-31" aria-hidden="true" tabindex="-1"></a>mm3 <span class="ot">&lt;-</span> mm2 <span class="sc">%&gt;%</span></span>
<span id="cb60-32"><a href="other-visulization-example.html#cb60-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">EcLoss       =</span> <span class="fu">ifelse</span>(Q94_3 <span class="sc">!=</span><span class="dv">0</span> <span class="sc">|</span> Q94_4<span class="sc">!=</span><span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb60-33"><a href="other-visulization-example.html#cb60-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">EcLossUnSafe =</span> <span class="fu">ifelse</span>(Q94_4<span class="sc">!=</span><span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb60-34"><a href="other-visulization-example.html#cb60-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agegp =</span> <span class="fu">cut</span>(age, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, (<span class="dv">5</span><span class="sc">:</span><span class="dv">13</span>)<span class="sc">*</span><span class="dv">5</span>, <span class="sc">+</span><span class="cn">Inf</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb60-35"><a href="other-visulization-example.html#cb60-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agegp2 =</span> <span class="fu">as.numeric</span>(agegp)) <span class="sc">%&gt;%</span></span>
<span id="cb60-36"><a href="other-visulization-example.html#cb60-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">ifelse</span>(gender <span class="sc">==</span><span class="dv">1</span>, <span class="st">&#39;Men&#39;</span>, <span class="st">&#39;Women&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb60-37"><a href="other-visulization-example.html#cb60-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Edugp =</span> <span class="fu">factor</span>(Education, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), </span>
<span id="cb60-38"><a href="other-visulization-example.html#cb60-38" aria-hidden="true" tabindex="-1"></a>                        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Middle or less&quot;</span>, <span class="st">&quot;High&quot;</span>, <span class="st">&quot;Colleage&quot;</span>, </span>
<span id="cb60-39"><a href="other-visulization-example.html#cb60-39" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;University&quot;</span>, <span class="st">&quot;Graduate Sc&quot;</span>, <span class="st">&quot;Doctoral or more&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb60-40"><a href="other-visulization-example.html#cb60-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">EcLossAll =</span> EcLoss <span class="sc">+</span> dfLossJob ) <span class="sc">%&gt;%</span></span>
<span id="cb60-41"><a href="other-visulization-example.html#cb60-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TotalDepAnx =</span> <span class="fu">ifelse</span>(EmoDep <span class="sc">==</span><span class="dv">7</span> <span class="sc">|</span> EmoAnx <span class="sc">==</span><span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb60-42"><a href="other-visulization-example.html#cb60-42" aria-hidden="true" tabindex="-1"></a>  <span class="co">#mutate(TotalDepAnx= as.numeric((as.numeric(EmoDep ==7) + as.numeric(EmoAnx ==7))) !=0)</span></span></code></pre></div>
<blockquote>
<p>create basic matrix for visualization (NA as zero)</p>
</blockquote>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="other-visulization-example.html#cb61-1" aria-hidden="true" tabindex="-1"></a>mm4 <span class="ot">&lt;-</span> mm3 <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="other-visulization-example.html#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">agegp3 =</span> <span class="fu">ifelse</span>(age <span class="sc">&lt;=</span><span class="dv">40</span>, <span class="st">&#39;≤40&#39;</span>, <span class="st">&#39;&gt;40&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb61-3"><a href="other-visulization-example.html#cb61-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">agegp3 =</span> <span class="fu">factor</span>(agegp3, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&#39;≤40&#39;</span>, <span class="st">&#39;&gt;40&#39;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb61-4"><a href="other-visulization-example.html#cb61-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Education <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb61-5"><a href="other-visulization-example.html#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">edugp =</span> <span class="fu">ifelse</span>(Education <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dv">1</span>, <span class="co"># high school or less</span></span>
<span id="cb61-6"><a href="other-visulization-example.html#cb61-6" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">ifelse</span>(Education <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">3</span>),<span class="dv">2</span>, <span class="co"># college</span></span>
<span id="cb61-7"><a href="other-visulization-example.html#cb61-7" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">ifelse</span>(Education <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">4</span>), <span class="dv">3</span>, <span class="dv">4</span>)))) <span class="sc">%&gt;%</span> <span class="co"># university (5, 6) Graduate school</span></span>
<span id="cb61-8"><a href="other-visulization-example.html#cb61-8" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">edugp2 =</span> <span class="fu">ifelse</span>(Education <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">1</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb61-9"><a href="other-visulization-example.html#cb61-9" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">EcLossAllgp =</span> <span class="fu">ifelse</span>(EcLossAll <span class="sc">==</span><span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>)) <span class="co">#%&gt;%</span></span>
<span id="cb61-10"><a href="other-visulization-example.html#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="co">#filter(!country %in% c(16, 173))</span></span>
<span id="cb61-11"><a href="other-visulization-example.html#cb61-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-12"><a href="other-visulization-example.html#cb61-12" aria-hidden="true" tabindex="-1"></a>bm1<span class="ot">&lt;-</span><span class="fu">crossing</span>(</span>
<span id="cb61-13"><a href="other-visulization-example.html#cb61-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;gender&#39;</span><span class="ot">=</span><span class="fu">unique</span>(mm4<span class="sc">$</span>gender),</span>
<span id="cb61-14"><a href="other-visulization-example.html#cb61-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;country_c&#39;</span><span class="ot">=</span><span class="fu">unique</span>(mm4<span class="sc">$</span>country_c),</span>
<span id="cb61-15"><a href="other-visulization-example.html#cb61-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;edugp&#39;</span><span class="ot">=</span><span class="fu">unique</span>(mm4<span class="sc">$</span>edugp),</span>
<span id="cb61-16"><a href="other-visulization-example.html#cb61-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;edugp2&#39;</span><span class="ot">=</span><span class="fu">unique</span>(mm4<span class="sc">$</span>edugp2),</span>
<span id="cb61-17"><a href="other-visulization-example.html#cb61-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;agegp2&#39;</span><span class="ot">=</span><span class="fu">unique</span>(mm4<span class="sc">$</span>agegp2), </span>
<span id="cb61-18"><a href="other-visulization-example.html#cb61-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;agegp3&#39;</span><span class="ot">=</span><span class="fu">unique</span>(mm4<span class="sc">$</span>agegp3),</span>
<span id="cb61-19"><a href="other-visulization-example.html#cb61-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;EcLossAllgp&#39;</span><span class="ot">=</span><span class="fu">unique</span>(mm4<span class="sc">$</span>EcLossAllgp), </span>
<span id="cb61-20"><a href="other-visulization-example.html#cb61-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;TotalDepAnx&#39;</span> <span class="ot">=</span> <span class="fu">unique</span>(mm4<span class="sc">$</span>TotalDepAnx)</span>
<span id="cb61-21"><a href="other-visulization-example.html#cb61-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb61-22"><a href="other-visulization-example.html#cb61-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-23"><a href="other-visulization-example.html#cb61-23" aria-hidden="true" tabindex="-1"></a>mm4<span class="fl">.0</span> <span class="ot">=</span> mm4 <span class="sc">%&gt;%</span></span>
<span id="cb61-24"><a href="other-visulization-example.html#cb61-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(hdi <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(country_1)) <span class="sc">%&gt;%</span></span>
<span id="cb61-25"><a href="other-visulization-example.html#cb61-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">country_source =</span> country,</span>
<span id="cb61-26"><a href="other-visulization-example.html#cb61-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">country=</span>country_1   ), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;country&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb61-27"><a href="other-visulization-example.html#cb61-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">y2019 =</span> <span class="fu">ifelse</span>(country_c <span class="sc">==</span><span class="st">&#39;South Korea&#39;</span>, <span class="fl">0.916</span>, y2019))</span></code></pre></div>
</div>
<div id="data-analysis-start" class="section level3 hasAnchor" number="12.2.5">
<h3><span class="header-section-number">12.2.5</span> Data analysis start<a href="other-visulization-example.html#data-analysis-start" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="job-loss-due-to-covid19-psychological-aggravation-according-to-gender" class="section level4 hasAnchor" number="12.2.5.1">
<h4><span class="header-section-number">12.2.5.1</span> job loss due to COVID19, psychological aggravation according to Gender<a href="other-visulization-example.html#job-loss-due-to-covid19-psychological-aggravation-according-to-gender" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>due to covid vary by country
basic static for job loss prevalence across country and genders.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="other-visulization-example.html#cb62-1" aria-hidden="true" tabindex="-1"></a>fig1 <span class="ot">&lt;-</span> mm4 <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="other-visulization-example.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_c, gender) <span class="sc">%&gt;%</span></span>
<span id="cb62-3"><a href="other-visulization-example.html#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(EcLossAllgp) <span class="sc">%&gt;%</span></span>
<span id="cb62-4"><a href="other-visulization-example.html#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prob =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb62-5"><a href="other-visulization-example.html#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(EcLossAllgp <span class="sc">==</span> <span class="dv">1</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb62-6"><a href="other-visulization-example.html#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gender, <span class="at">y =</span> prob, <span class="at">fill =</span> gender)) <span class="sc">+</span></span>
<span id="cb62-7"><a href="other-visulization-example.html#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>)<span class="sc">+</span></span>
<span id="cb62-8"><a href="other-visulization-example.html#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)<span class="sc">+</span></span>
<span id="cb62-9"><a href="other-visulization-example.html#cb62-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Job loss due to COVID19&quot;</span>)<span class="sc">+</span></span>
<span id="cb62-10"><a href="other-visulization-example.html#cb62-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x<span class="sc">*</span><span class="dv">100</span>, <span class="st">&quot;%&quot;</span>))<span class="sc">+</span></span>
<span id="cb62-11"><a href="other-visulization-example.html#cb62-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(country_c <span class="sc">~</span>., <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb62-12"><a href="other-visulization-example.html#cb62-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb62-13"><a href="other-visulization-example.html#cb62-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">17</span>))<span class="sc">+</span></span>
<span id="cb62-14"><a href="other-visulization-example.html#cb62-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">92</span>, .<span class="dv">1</span>))</span>
<span id="cb62-15"><a href="other-visulization-example.html#cb62-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-16"><a href="other-visulization-example.html#cb62-16" aria-hidden="true" tabindex="-1"></a>fig2 <span class="ot">&lt;-</span> mm4 <span class="sc">%&gt;%</span></span>
<span id="cb62-17"><a href="other-visulization-example.html#cb62-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_c, gender) <span class="sc">%&gt;%</span></span>
<span id="cb62-18"><a href="other-visulization-example.html#cb62-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(TotalDepAnx) <span class="sc">%&gt;%</span></span>
<span id="cb62-19"><a href="other-visulization-example.html#cb62-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prob =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb62-20"><a href="other-visulization-example.html#cb62-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TotalDepAnx <span class="sc">==</span> <span class="dv">1</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb62-21"><a href="other-visulization-example.html#cb62-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gender, <span class="at">y =</span> prob, <span class="at">fill =</span> gender)) <span class="sc">+</span></span>
<span id="cb62-22"><a href="other-visulization-example.html#cb62-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>)<span class="sc">+</span></span>
<span id="cb62-23"><a href="other-visulization-example.html#cb62-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Psychological aggravation due to COVID19&quot;</span>)<span class="sc">+</span></span>
<span id="cb62-24"><a href="other-visulization-example.html#cb62-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&#39;Gender&#39;</span>)<span class="sc">+</span></span>
<span id="cb62-25"><a href="other-visulization-example.html#cb62-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x<span class="sc">*</span><span class="dv">100</span>, <span class="st">&quot;%&quot;</span>))<span class="sc">+</span></span>
<span id="cb62-26"><a href="other-visulization-example.html#cb62-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(country_c <span class="sc">~</span>., <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb62-27"><a href="other-visulization-example.html#cb62-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb62-28"><a href="other-visulization-example.html#cb62-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">17</span>))<span class="sc">+</span></span>
<span id="cb62-29"><a href="other-visulization-example.html#cb62-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">92</span>, .<span class="dv">1</span>))</span></code></pre></div>
<p>Save total figure</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="other-visulization-example.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">arrangeGrob</span>(fig1, fig2, <span class="at">ncol =</span> <span class="dv">1</span>), <span class="at">file =</span><span class="st">&#39;results/covid/figtotal.png&#39;</span>, <span class="at">dpi =</span> <span class="dv">300</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span><span class="dv">14</span>)</span>
<span id="cb63-2"><a href="other-visulization-example.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">arrangeGrob</span>(fig1, fig2, <span class="at">ncol =</span> <span class="dv">1</span>), <span class="at">file =</span><span class="st">&#39;results/covid/tiff/figtotal.tiff&#39;</span>, <span class="at">dpi =</span> <span class="dv">300</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span><span class="dv">14</span>)</span></code></pre></div>
<p><img src="results/covid/figtotal.png" width="1500" /></p>
</div>
<div id="job-loss-psychological-aggravation-according-to-age-group" class="section level4 hasAnchor" number="12.2.5.2">
<h4><span class="header-section-number">12.2.5.2</span> job loss, psychological aggravation according to age group<a href="other-visulization-example.html#job-loss-psychological-aggravation-according-to-age-group" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="other-visulization-example.html#cb64-1" aria-hidden="true" tabindex="-1"></a>fig3 <span class="ot">&lt;-</span> mm4<span class="fl">.0</span> <span class="sc">%&gt;%</span></span>
<span id="cb64-2"><a href="other-visulization-example.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter(!country %in% c(16, 173)) %&gt;%</span></span>
<span id="cb64-3"><a href="other-visulization-example.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_c, gender, agegp2) <span class="sc">%&gt;%</span></span>
<span id="cb64-4"><a href="other-visulization-example.html#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(EcLossAllgp) <span class="sc">%&gt;%</span></span>
<span id="cb64-5"><a href="other-visulization-example.html#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prob =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb64-6"><a href="other-visulization-example.html#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(EcLossAllgp <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb64-7"><a href="other-visulization-example.html#cb64-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> agegp2, <span class="at">y =</span> prob, <span class="at">color =</span> gender)) <span class="sc">+</span></span>
<span id="cb64-8"><a href="other-visulization-example.html#cb64-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> n), <span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb64-9"><a href="other-visulization-example.html#cb64-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&#39;loess&#39;</span>, <span class="at">span =</span><span class="fl">0.9</span>,  <span class="at">se=</span><span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb64-10"><a href="other-visulization-example.html#cb64-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ylab</span>(<span class="st">&quot;Job loss due to COVID19&quot;</span>)<span class="sc">+</span></span>
<span id="cb64-11"><a href="other-visulization-example.html#cb64-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x<span class="sc">*</span><span class="dv">100</span>, <span class="st">&quot;%&quot;</span>))<span class="sc">+</span></span>
<span id="cb64-12"><a href="other-visulization-example.html#cb64-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb64-13"><a href="other-visulization-example.html#cb64-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)<span class="sc">+</span></span>
<span id="cb64-14"><a href="other-visulization-example.html#cb64-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;Gender&quot;</span>) <span class="sc">+</span></span>
<span id="cb64-15"><a href="other-visulization-example.html#cb64-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(country_c<span class="sc">~</span>., <span class="at">nrow =</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb64-16"><a href="other-visulization-example.html#cb64-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">92</span>, .<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb64-17"><a href="other-visulization-example.html#cb64-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">17</span>))<span class="sc">+</span></span>
<span id="cb64-18"><a href="other-visulization-example.html#cb64-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">60</span>))</span>
<span id="cb64-19"><a href="other-visulization-example.html#cb64-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-20"><a href="other-visulization-example.html#cb64-20" aria-hidden="true" tabindex="-1"></a>fig4 <span class="ot">&lt;-</span> mm4<span class="fl">.0</span> <span class="sc">%&gt;%</span></span>
<span id="cb64-21"><a href="other-visulization-example.html#cb64-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter(!country %in% c(16, 173)) %&gt;%</span></span>
<span id="cb64-22"><a href="other-visulization-example.html#cb64-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_c, gender, agegp2) <span class="sc">%&gt;%</span></span>
<span id="cb64-23"><a href="other-visulization-example.html#cb64-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(TotalDepAnx) <span class="sc">%&gt;%</span></span>
<span id="cb64-24"><a href="other-visulization-example.html#cb64-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prob =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb64-25"><a href="other-visulization-example.html#cb64-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TotalDepAnx <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb64-26"><a href="other-visulization-example.html#cb64-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> agegp2, <span class="at">y =</span> prob, <span class="at">color =</span> gender)) <span class="sc">+</span></span>
<span id="cb64-27"><a href="other-visulization-example.html#cb64-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> n), <span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb64-28"><a href="other-visulization-example.html#cb64-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&#39;loess&#39;</span>, <span class="at">span =</span><span class="fl">0.9</span>,  <span class="at">se=</span><span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb64-29"><a href="other-visulization-example.html#cb64-29" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ylab</span>(<span class="st">&quot;Psychological aggravation due to COVID19&quot;</span>)<span class="sc">+</span></span>
<span id="cb64-30"><a href="other-visulization-example.html#cb64-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x<span class="sc">*</span><span class="dv">100</span>, <span class="st">&quot;%&quot;</span>))<span class="sc">+</span></span>
<span id="cb64-31"><a href="other-visulization-example.html#cb64-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb64-32"><a href="other-visulization-example.html#cb64-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Age (size = number of respondents)&quot;</span>) <span class="sc">+</span></span>
<span id="cb64-33"><a href="other-visulization-example.html#cb64-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;Gender&quot;</span>) <span class="sc">+</span></span>
<span id="cb64-34"><a href="other-visulization-example.html#cb64-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(country_c<span class="sc">~</span>., <span class="at">nrow =</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb64-35"><a href="other-visulization-example.html#cb64-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">92</span>, .<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb64-36"><a href="other-visulization-example.html#cb64-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">17</span>))<span class="sc">+</span></span>
<span id="cb64-37"><a href="other-visulization-example.html#cb64-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span> (<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">60</span>))</span></code></pre></div>
<p>save figures</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="other-visulization-example.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">#figtotal2 &lt;- grid.arrange(fig3, fig4, ncol = 1)</span></span>
<span id="cb65-2"><a href="other-visulization-example.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">arrangeGrob</span>(fig3, fig4, <span class="at">ncol =</span> <span class="dv">1</span>), <span class="at">file =</span><span class="st">&#39;results/covid/figtotal2.png&#39;</span>, <span class="at">dpi =</span> <span class="dv">300</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span><span class="dv">14</span>)</span>
<span id="cb65-3"><a href="other-visulization-example.html#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">arrangeGrob</span>(fig3, fig4, <span class="at">ncol =</span> <span class="dv">1</span>), <span class="at">file =</span><span class="st">&#39;results/covid/tiff/figtotal2.tiff&#39;</span>, <span class="at">dpi =</span> <span class="dv">300</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span><span class="dv">14</span>)</span></code></pre></div>
<p><img src="results/covid/figtotal2.png" width="1500" /></p>
</div>
</div>
<div id="job-loss-psychological-aggravation-according-to-education-level" class="section level3 hasAnchor" number="12.2.6">
<h3><span class="header-section-number">12.2.6</span> job loss, psychological aggravation according to Education level<a href="other-visulization-example.html#job-loss-psychological-aggravation-according-to-education-level" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="other-visulization-example.html#cb66-1" aria-hidden="true" tabindex="-1"></a>fig5 <span class="ot">&lt;-</span> mm4<span class="fl">.0</span> <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="other-visulization-example.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(edugp, country_c, gender) <span class="sc">%&gt;%</span></span>
<span id="cb66-3"><a href="other-visulization-example.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(EcLossAllgp ) <span class="sc">%&gt;%</span></span>
<span id="cb66-4"><a href="other-visulization-example.html#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prob =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb66-5"><a href="other-visulization-example.html#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(EcLossAllgp  <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb66-6"><a href="other-visulization-example.html#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> edugp, <span class="at">y =</span> prob, <span class="at">color =</span> gender)) <span class="sc">+</span></span>
<span id="cb66-7"><a href="other-visulization-example.html#cb66-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&#39;loess&#39;</span>, <span class="at">span =</span><span class="fl">0.9</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb66-8"><a href="other-visulization-example.html#cb66-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;≤H&quot;</span>, <span class="st">&quot;2&quot;</span> <span class="ot">=</span> <span class="st">&quot;C&quot;</span>,</span>
<span id="cb66-9"><a href="other-visulization-example.html#cb66-9" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;3&quot;</span> <span class="ot">=</span> <span class="st">&quot;U&quot;</span>, <span class="st">&quot;4&quot;</span> <span class="ot">=</span> <span class="st">&quot;G&quot;</span>)) <span class="sc">+</span></span>
<span id="cb66-10"><a href="other-visulization-example.html#cb66-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb66-11"><a href="other-visulization-example.html#cb66-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;Gender&quot;</span>) <span class="sc">+</span></span>
<span id="cb66-12"><a href="other-visulization-example.html#cb66-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Job Loss due to COVID19&quot;</span>) <span class="sc">+</span></span>
<span id="cb66-13"><a href="other-visulization-example.html#cb66-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)<span class="sc">+</span></span>
<span id="cb66-14"><a href="other-visulization-example.html#cb66-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(country_c <span class="sc">~</span>., <span class="at">nrow =</span> <span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb66-15"><a href="other-visulization-example.html#cb66-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">17</span>))<span class="sc">+</span></span>
<span id="cb66-16"><a href="other-visulization-example.html#cb66-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">92</span>, .<span class="dv">1</span>))</span>
<span id="cb66-17"><a href="other-visulization-example.html#cb66-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-18"><a href="other-visulization-example.html#cb66-18" aria-hidden="true" tabindex="-1"></a><span class="co"># mm4 %&gt;%</span></span>
<span id="cb66-19"><a href="other-visulization-example.html#cb66-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   count(TotalDepAnx)</span></span>
<span id="cb66-20"><a href="other-visulization-example.html#cb66-20" aria-hidden="true" tabindex="-1"></a>fig6 <span class="ot">&lt;-</span> mm4<span class="fl">.0</span> <span class="sc">%&gt;%</span></span>
<span id="cb66-21"><a href="other-visulization-example.html#cb66-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(edugp, country_c, gender) <span class="sc">%&gt;%</span></span>
<span id="cb66-22"><a href="other-visulization-example.html#cb66-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(TotalDepAnx ) <span class="sc">%&gt;%</span></span>
<span id="cb66-23"><a href="other-visulization-example.html#cb66-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prob =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb66-24"><a href="other-visulization-example.html#cb66-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TotalDepAnx  <span class="sc">==</span> <span class="dv">1</span>  ) <span class="sc">%&gt;%</span></span>
<span id="cb66-25"><a href="other-visulization-example.html#cb66-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> edugp, <span class="at">y =</span> prob, <span class="at">color =</span> gender)) <span class="sc">+</span></span>
<span id="cb66-26"><a href="other-visulization-example.html#cb66-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&#39;loess&#39;</span>, <span class="at">span =</span><span class="fl">0.9</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb66-27"><a href="other-visulization-example.html#cb66-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;≤H&quot;</span>, <span class="st">&quot;2&quot;</span> <span class="ot">=</span> <span class="st">&quot;C&quot;</span>,</span>
<span id="cb66-28"><a href="other-visulization-example.html#cb66-28" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;3&quot;</span> <span class="ot">=</span> <span class="st">&quot;U&quot;</span>, <span class="st">&quot;4&quot;</span> <span class="ot">=</span> <span class="st">&quot;G&quot;</span>)) <span class="sc">+</span></span>
<span id="cb66-29"><a href="other-visulization-example.html#cb66-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb66-30"><a href="other-visulization-example.html#cb66-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Psychological aggravation due to COVID19&quot;</span>) <span class="sc">+</span></span>
<span id="cb66-31"><a href="other-visulization-example.html#cb66-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x<span class="sc">*</span><span class="dv">100</span>, <span class="st">&quot;%&quot;</span>))<span class="sc">+</span></span>
<span id="cb66-32"><a href="other-visulization-example.html#cb66-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;H = high school, C = college, U = university, G = graduate &quot;</span>) <span class="sc">+</span></span>
<span id="cb66-33"><a href="other-visulization-example.html#cb66-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;Gender&quot;</span>) <span class="sc">+</span></span>
<span id="cb66-34"><a href="other-visulization-example.html#cb66-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(country_c <span class="sc">~</span>., <span class="at">nrow =</span> <span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb66-35"><a href="other-visulization-example.html#cb66-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">17</span>))<span class="sc">+</span></span>
<span id="cb66-36"><a href="other-visulization-example.html#cb66-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">92</span>, .<span class="dv">1</span>))</span></code></pre></div>
<p>save figure</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="other-visulization-example.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">#figtotal3 &lt;- grid.arrange(fig5, fig6, ncol = 1)</span></span>
<span id="cb67-2"><a href="other-visulization-example.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">arrangeGrob</span>(fig5, fig6, <span class="at">ncol =</span> <span class="dv">1</span>), <span class="at">file =</span><span class="st">&#39;results/covid/figtotal3.png&#39;</span>, <span class="at">dpi =</span> <span class="dv">300</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span><span class="dv">14</span>)</span>
<span id="cb67-3"><a href="other-visulization-example.html#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">arrangeGrob</span>(fig5, fig6, <span class="at">ncol =</span> <span class="dv">1</span>), <span class="at">file =</span><span class="st">&#39;results/covid/tiff/figtotal3.tiff&#39;</span>, <span class="at">dpi =</span> <span class="dv">300</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span><span class="dv">14</span>)</span></code></pre></div>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="other-visulization-example.html#cb68-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&#39;results/covid/figtotal3.png&#39;</span>)</span></code></pre></div>
<p><img src="results/covid/figtotal3.png" width="1500" /></p>
<div id="depression-status-according-job-loss-status" class="section level4 hasAnchor" number="12.2.6.1">
<h4><span class="header-section-number">12.2.6.1</span> Depression status according job loss status<a href="other-visulization-example.html#depression-status-according-job-loss-status" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>basic statistic for DepAnx prevalence across country and genders.</p>
</div>
</div>
<div id="association" class="section level3 hasAnchor" number="12.2.7">
<h3><span class="header-section-number">12.2.7</span> association<a href="other-visulization-example.html#association" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="other-visulization-example.html#cb69-1" aria-hidden="true" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Taiwan&quot;</span>,<span class="st">&quot;USA&quot;</span>, <span class="st">&quot;Belarus&quot;</span>, <span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;China&quot;</span>, </span>
<span id="cb69-2"><a href="other-visulization-example.html#cb69-2" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;German&quot;</span>, <span class="st">&quot;Hong Kong&quot;</span>, <span class="st">&quot;Indonesia&quot;</span>, </span>
<span id="cb69-3"><a href="other-visulization-example.html#cb69-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Malaysia&quot;</span>, <span class="st">&quot;Philippines&quot;</span>, <span class="st">&quot;Poland&quot;</span>, </span>
<span id="cb69-4"><a href="other-visulization-example.html#cb69-4" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Rusia&quot;</span>, <span class="st">&quot;Singapore&quot;</span>, <span class="st">&quot;Sweden&quot;</span>, </span>
<span id="cb69-5"><a href="other-visulization-example.html#cb69-5" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Thailand&quot;</span>, <span class="st">&quot;South Korea&quot;</span>, <span class="st">&quot;Turkey&quot;</span>, </span>
<span id="cb69-6"><a href="other-visulization-example.html#cb69-6" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Ukraine&quot;</span>, <span class="st">&quot;Vietnam&quot;</span>)</span>
<span id="cb69-7"><a href="other-visulization-example.html#cb69-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-8"><a href="other-visulization-example.html#cb69-8" aria-hidden="true" tabindex="-1"></a>mm4<span class="fl">.1</span> <span class="ot">&lt;-</span> mm4<span class="fl">.0</span> <span class="sc">%&gt;%</span> </span>
<span id="cb69-9"><a href="other-visulization-example.html#cb69-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TotalDepAnx =</span> <span class="fu">factor</span>(TotalDepAnx, <span class="at">levels =</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)),</span>
<span id="cb69-10"><a href="other-visulization-example.html#cb69-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">EcLossAllgp =</span> <span class="fu">factor</span>(EcLossAllgp, <span class="at">levels =</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)),</span>
<span id="cb69-11"><a href="other-visulization-example.html#cb69-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">gender      =</span> <span class="fu">factor</span>(gender, <span class="at">levels =</span><span class="fu">c</span>(<span class="st">&#39;Men&#39;</span>, <span class="st">&#39;Women&#39;</span>)),</span>
<span id="cb69-12"><a href="other-visulization-example.html#cb69-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">edugp2       =</span> <span class="fu">factor</span>(edugp2, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)),</span>
<span id="cb69-13"><a href="other-visulization-example.html#cb69-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">country_c   =</span> <span class="fu">factor</span>(country_c, <span class="at">levels=</span> countries))</span></code></pre></div>
<p>regression model</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="other-visulization-example.html#cb70-1" aria-hidden="true" tabindex="-1"></a>mod1 <span class="ot">=</span> mm4<span class="fl">.1</span> <span class="sc">%&gt;%</span></span>
<span id="cb70-2"><a href="other-visulization-example.html#cb70-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glm</span>(<span class="at">family =</span> binomial, </span>
<span id="cb70-3"><a href="other-visulization-example.html#cb70-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">formula =</span> TotalDepAnx <span class="sc">~</span> EcLossAllgp) </span>
<span id="cb70-4"><a href="other-visulization-example.html#cb70-4" aria-hidden="true" tabindex="-1"></a>mod2 <span class="ot">=</span> mm4<span class="fl">.1</span> <span class="sc">%&gt;%</span></span>
<span id="cb70-5"><a href="other-visulization-example.html#cb70-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glm</span>(<span class="at">family =</span> binomial, </span>
<span id="cb70-6"><a href="other-visulization-example.html#cb70-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">formula =</span> TotalDepAnx <span class="sc">~</span> EcLossAllgp <span class="sc">+</span> age <span class="sc">+</span> gender <span class="sc">+</span> edugp2) </span>
<span id="cb70-7"><a href="other-visulization-example.html#cb70-7" aria-hidden="true" tabindex="-1"></a>mod3 <span class="ot">=</span> mm4<span class="fl">.1</span> <span class="sc">%&gt;%</span></span>
<span id="cb70-8"><a href="other-visulization-example.html#cb70-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glm</span>(<span class="at">family =</span> binomial, </span>
<span id="cb70-9"><a href="other-visulization-example.html#cb70-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">formula =</span> TotalDepAnx <span class="sc">~</span> EcLossAllgp <span class="sc">+</span> age <span class="sc">+</span> gender <span class="sc">+</span> edugp2 <span class="sc">+</span> </span>
<span id="cb70-10"><a href="other-visulization-example.html#cb70-10" aria-hidden="true" tabindex="-1"></a>         <span class="fu">relevel</span>(<span class="fu">as.factor</span>(country_c), <span class="at">ref =</span> <span class="st">&#39;Taiwan&#39;</span>) )</span></code></pre></div>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="other-visulization-example.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oddsTabf</span>(mod1, mod2, mod3)</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<td colspan="6" style="text-align: left;">
Table. OR(95%CI) for TotalDepAnx
</td>
</tr>
<tr>
<th style="border-bottom: 1px solid grey; border-top: 2px solid grey;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
Variables
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
Values
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
Model.I
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
Model.II
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
Model.III
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">
1
</td>
<td style="text-align: left;">
EcLossAllgp
</td>
<td style="text-align: left;">
0
</td>
<td style="text-align: left;">
<i>1.00 (reference)</i>
</td>
<td style="text-align: left;">
<i>1.00 (reference)</i>
</td>
<td style="text-align: left;">
<i>1.00 (reference)</i>
</td>
</tr>
<tr>
<td style="text-align: left;">
2
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>1</b>
</td>
<td style="text-align: left;">
<b>1.65 (1.51-1.79)</b>
</td>
<td style="text-align: left;">
<b>1.64 (1.51-1.79)</b>
</td>
<td style="text-align: left;">
<b>1.55 (1.42-1.70)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
3
</td>
<td style="text-align: left;">
gender
</td>
<td style="text-align: left;">
Men
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<i>1.00 (reference)</i>
</td>
<td style="text-align: left;">
<i>1.00 (reference)</i>
</td>
</tr>
<tr>
<td style="text-align: left;">
4
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>Women</b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>1.33 (1.24-1.42)</b>
</td>
<td style="text-align: left;">
<b>1.34 (1.25-1.43)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
5
</td>
<td style="text-align: left;">
edugp2
</td>
<td style="text-align: left;">
1
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<i>1.00 (reference)</i>
</td>
<td style="text-align: left;">
<i>1.00 (reference)</i>
</td>
</tr>
<tr>
<td style="text-align: left;">
6
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>2</b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>1.34 (1.24-1.43)</b>
</td>
<td style="text-align: left;">
<b>1.28 (1.19-1.39)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
7
</td>
<td style="text-align: left;">
age
</td>
<td style="text-align: left;">
<b></b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>0.99 (0.99-0.99)</b>
</td>
<td style="text-align: left;">
<b>0.99 (0.99-0.99)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
8
</td>
<td style="text-align: left;">
relevel(as.factor(country_c), ref = “Taiwan”)
</td>
<td style="text-align: left;">
Taiwan
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<i>1.00 (reference)</i>
</td>
</tr>
<tr>
<td style="text-align: left;">
9
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>USA</b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>1.73 (1.40-2.14)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
10
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>Canada</b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>1.42 (1.15-1.75)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
11
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>China</b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>1.33 (1.10-1.61)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
12
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
German
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
0.94 (0.76-1.16)
</td>
</tr>
<tr>
<td style="text-align: left;">
13
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
Hong Kong
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
1.22 (0.97-1.53)
</td>
</tr>
<tr>
<td style="text-align: left;">
14
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>Indonesia</b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>2.48 (2.02-3.04)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
15
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
Malaysia
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
1.02 (0.83-1.25)
</td>
</tr>
<tr>
<td style="text-align: left;">
16
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>Philippines</b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>1.35 (1.10-1.66)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
17
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>Poland</b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>3.01 (2.44-3.72)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
18
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>Singapore</b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>1.77 (1.39-2.25)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
19
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
Sweden
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
0.82 (0.66-1.02)
</td>
</tr>
<tr>
<td style="text-align: left;">
20
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>Thailand</b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>2.98 (2.42-3.66)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
21
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>South Korea</b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>2.72 (2.22-3.33)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
22
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>Turkey</b>
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
<b>3.35 (2.71-4.15)</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
23
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
Ukraine
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
</td>
<td style="text-align: left;">
1.20 (0.98-1.47)
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
24
</td>
<td style="border-bottom: 2px solid grey; text-align: left;">
</td>
<td style="border-bottom: 2px solid grey; text-align: left;">
<b>Vietnam</b>
</td>
<td style="border-bottom: 2px solid grey; text-align: left;">
</td>
<td style="border-bottom: 2px solid grey; text-align: left;">
</td>
<td style="border-bottom: 2px solid grey; text-align: left;">
<b>1.89 (1.54-2.33)</b>
</td>
</tr>
</tbody>
</table>
<p>summay stat of each models.</p>
</div>
<div id="mixed-model" class="section level3 hasAnchor" number="12.2.8">
<h3><span class="header-section-number">12.2.8</span> mixed model<a href="other-visulization-example.html#mixed-model" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="other-visulization-example.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(lme4)) <span class="fu">install.packages</span>(<span class="st">&#39;lme4&#39;</span>);<span class="fu">library</span>(lme4)</span></code></pre></div>
<p>first mixed model</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="other-visulization-example.html#cb73-1" aria-hidden="true" tabindex="-1"></a>mm4<span class="fl">.2</span> <span class="ot">=</span> mm4<span class="fl">.1</span> <span class="sc">%&gt;%</span></span>
<span id="cb73-2"><a href="other-visulization-example.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country_c2 =</span> <span class="fu">relevel</span>(<span class="fu">as.factor</span>(country_c), <span class="at">ref =</span> <span class="st">&#39;Taiwan&#39;</span>) ) <span class="sc">%&gt;%</span></span>
<span id="cb73-3"><a href="other-visulization-example.html#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TotalDepAnx2 =</span> <span class="fu">as.numeric</span>(TotalDepAnx)) <span class="sc">%&gt;%</span></span>
<span id="cb73-4"><a href="other-visulization-example.html#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">EcLossAllgp2 =</span> <span class="fu">as.numeric</span>(EcLossAllgp)) <span class="sc">%&gt;%</span></span>
<span id="cb73-5"><a href="other-visulization-example.html#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">edugp3 =</span> <span class="fu">as.numeric</span>(edugp2)) <span class="sc">%&gt;%</span></span>
<span id="cb73-6"><a href="other-visulization-example.html#cb73-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age2 =</span> <span class="fu">as.numeric</span>(age)) <span class="sc">%&gt;%</span></span>
<span id="cb73-7"><a href="other-visulization-example.html#cb73-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender2 =</span> <span class="fu">as.numeric</span>(gender)) </span></code></pre></div>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="other-visulization-example.html#cb74-1" aria-hidden="true" tabindex="-1"></a>mixed.lmer <span class="ot">=</span> <span class="fu">lmer</span>(TotalDepAnx2 <span class="sc">~</span> EcLossAllgp2 <span class="sc">+</span> age <span class="sc">+</span> edugp <span class="sc">+</span> gender<span class="sc">+</span> </span>
<span id="cb74-2"><a href="other-visulization-example.html#cb74-2" aria-hidden="true" tabindex="-1"></a>                    (<span class="dv">1</span><span class="sc">|</span>country_c2), <span class="at">data=</span>mm4<span class="fl">.2</span>)</span>
<span id="cb74-3"><a href="other-visulization-example.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mixed.lmer)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: TotalDepAnx2 ~ EcLossAllgp2 + age + edugp + gender + (1 | country_c2)
##    Data: mm4.2
## 
## REML criterion at convergence: 19305.2
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -1.8980 -1.0808  0.5415  0.8399  1.5079 
## 
## Random effects:
##  Groups     Name        Variance Std.Dev.
##  country_c2 (Intercept) 0.01083  0.1040  
##  Residual               0.22546  0.4748  
## Number of obs: 14243, groups:  country_c2, 17
## 
## Fixed effects:
##                Estimate Std. Error t value
## (Intercept)   1.4655134  0.0346770  42.262
## EcLossAllgp2  0.0963579  0.0100154   9.621
## age          -0.0021919  0.0003372  -6.501
## edugp         0.0228408  0.0040361   5.659
## genderWomen   0.0653560  0.0080437   8.125
## 
## Correlation of Fixed Effects:
##             (Intr) EcLsA2 age    edugp 
## EcLssAllgp2 -0.409                     
## age         -0.459  0.090              
## edugp       -0.357  0.064  0.057       
## genderWomen -0.164  0.027  0.103 -0.007</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="other-visulization-example.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">#qqnorm(resid(mixed.lmer))</span></span></code></pre></div>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="other-visulization-example.html#cb77-1" aria-hidden="true" tabindex="-1"></a>mixed.lmer2 <span class="ot">=</span> <span class="fu">lmer</span>(TotalDepAnx2 <span class="sc">~</span> EcLossAllgp <span class="sc">+</span> age2 <span class="sc">+</span></span>
<span id="cb77-2"><a href="other-visulization-example.html#cb77-2" aria-hidden="true" tabindex="-1"></a>                    (<span class="dv">1</span><span class="sc">|</span>edugp3)<span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>country_c2<span class="sc">/</span>gender2), <span class="at">data=</span>mm4<span class="fl">.2</span>)</span>
<span id="cb77-3"><a href="other-visulization-example.html#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mixed.lmer2)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: 
## TotalDepAnx2 ~ EcLossAllgp + age2 + (1 | edugp3) + (1 | country_c2/gender2)
##    Data: mm4.2
## 
## REML criterion at convergence: 19288.9
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -1.9338 -1.0857  0.5291  0.8523  1.5039 
## 
## Random effects:
##  Groups             Name        Variance Std.Dev.
##  gender2:country_c2 (Intercept) 0.003000 0.05477 
##  country_c2         (Intercept) 0.008937 0.09454 
##  edugp3             (Intercept) 0.001715 0.04141 
##  Residual                       0.224888 0.47422 
## Number of obs: 14243, groups:  
## gender2:country_c2, 34; country_c2, 17; edugp3, 2
## 
## Fixed effects:
##               Estimate Std. Error t value
## (Intercept)   1.646672   0.041153  40.013
## EcLossAllgp1  0.095570   0.010010   9.548
## age2         -0.002198   0.000338  -6.503
## 
## Correlation of Fixed Effects:
##             (Intr) EcLsA1
## EcLssAllgp1 -0.084       
## age2        -0.343  0.091</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="other-visulization-example.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">#qqnorm(resid(mixed.lmer2))</span></span></code></pre></div>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="other-visulization-example.html#cb80-1" aria-hidden="true" tabindex="-1"></a>mixed.lmer3 <span class="ot">=</span> <span class="fu">lmer</span>(TotalDepAnx2 <span class="sc">~</span> EcLossAllgp <span class="sc">+</span> age2 <span class="sc">+</span> edugp2<span class="sc">+</span></span>
<span id="cb80-2"><a href="other-visulization-example.html#cb80-2" aria-hidden="true" tabindex="-1"></a>                  (<span class="dv">1</span><span class="sc">+</span>TotalDepAnx2<span class="sc">|</span>country_c2<span class="sc">/</span>gender2), <span class="at">data=</span>mm4<span class="fl">.2</span>)</span>
<span id="cb80-3"><a href="other-visulization-example.html#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mixed.lmer3)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: TotalDepAnx2 ~ EcLossAllgp + age2 + edugp2 + (1 + TotalDepAnx2 |  
##     country_c2/gender2)
##    Data: mm4.2
## 
## REML criterion at convergence: -394555.3
## 
## Scaled residuals: 
##        Min         1Q     Median         3Q        Max 
## -3.702e-06 -2.610e-07  1.009e-07  3.772e-07  2.663e-06 
## 
## Random effects:
##  Groups             Name         Variance  Std.Dev.  Corr 
##  gender2:country_c2 (Intercept)  8.457e-06 2.908e-03      
##                     TotalDepAnx2 2.315e-03 4.812e-02 -0.86
##  country_c2         (Intercept)  5.900e-05 7.681e-03      
##                     TotalDepAnx2 4.791e-05 6.922e-03 0.68 
##  Residual                        4.745e-14 2.178e-07      
## Number of obs: 14243, groups:  gender2:country_c2, 34; country_c2, 17
## 
## Fixed effects:
##               Estimate Std. Error t value
## (Intercept)  1.431e-02  1.932e-03   7.408
## EcLossAllgp1 1.691e-14  4.623e-09   0.000
## age2         1.732e-15  1.562e-10   0.000
## edugp22      1.311e-14  4.080e-09   0.000
## 
## Correlation of Fixed Effects:
##             (Intr) EcLsA1 age2 
## EcLssAllgp1 0.000              
## age2        0.000  0.085       
## edugp22     0.000  0.067  0.069
## optimizer (nloptwrap) convergence code: 0 (OK)
## unable to evaluate scaled gradient
## Model failed to converge: degenerate  Hessian with 1 negative eigenvalues</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="other-visulization-example.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co">#qqnorm(resid(mixed.lmer2))</span></span></code></pre></div>
<p>make region variable, humain devepin index and .. stratification anaysis.
(Asia vs non-Asia or …)
deveolping index ..</p>
</div>
<div id="mixed-model-with-human-develop-index-stratification" class="section level3 hasAnchor" number="12.2.9">
<h3><span class="header-section-number">12.2.9</span> mixed model with human develop index stratification<a href="other-visulization-example.html#mixed-model-with-human-develop-index-stratification" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="other-visulization-example.html#cb83-1" aria-hidden="true" tabindex="-1"></a>agu1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&#39;data/covid/covid_agu1.csv&#39;</span>)</span>
<span id="cb83-2"><a href="other-visulization-example.html#cb83-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a href="other-visulization-example.html#cb83-3" aria-hidden="true" tabindex="-1"></a>lab_mm <span class="ot">&lt;-</span> mm4<span class="fl">.0</span> <span class="sc">%&gt;%</span></span>
<span id="cb83-4"><a href="other-visulization-example.html#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(agu1, <span class="at">by =</span> <span class="st">&#39;country_c&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb83-5"><a href="other-visulization-example.html#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inc_aug =</span> c_case_agu1 <span class="sc">/</span> population <span class="sc">*</span><span class="dv">100000</span>, </span>
<span id="cb83-6"><a href="other-visulization-example.html#cb83-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">dth_aug =</span> c_death_agu1<span class="sc">/</span> population <span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb83-7"><a href="other-visulization-example.html#cb83-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_c, gender) <span class="sc">%&gt;%</span></span>
<span id="cb83-8"><a href="other-visulization-example.html#cb83-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">hdi =</span> <span class="fu">mean</span>(y2019), </span>
<span id="cb83-9"><a href="other-visulization-example.html#cb83-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">Psycho =</span> <span class="fu">mean</span>(TotalDepAnx <span class="sc">==</span><span class="dv">1</span>), </span>
<span id="cb83-10"><a href="other-visulization-example.html#cb83-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">ecl =</span> <span class="fu">mean</span>(EcLossAll <span class="sc">!=</span><span class="dv">0</span>),</span>
<span id="cb83-11"><a href="other-visulization-example.html#cb83-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">inc =</span> <span class="fu">mean</span>(inc_aug)) </span>
<span id="cb83-12"><a href="other-visulization-example.html#cb83-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-13"><a href="other-visulization-example.html#cb83-13" aria-hidden="true" tabindex="-1"></a>lab_mm<span class="sc">%&gt;%</span></span>
<span id="cb83-14"><a href="other-visulization-example.html#cb83-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> hdi, <span class="at">y =</span> ecl, <span class="at">color =</span> inc)) <span class="sc">+</span></span>
<span id="cb83-15"><a href="other-visulization-example.html#cb83-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb83-16"><a href="other-visulization-example.html#cb83-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb83-17"><a href="other-visulization-example.html#cb83-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Human Devlopment Index&quot;</span>) <span class="sc">+</span></span>
<span id="cb83-18"><a href="other-visulization-example.html#cb83-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">#ylab(&quot;prevalance of Psychological Symptoms&quot;) +</span></span>
<span id="cb83-19"><a href="other-visulization-example.html#cb83-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;prevalance of Economic Loss due to COVID19&quot;</span>) <span class="sc">+</span> </span>
<span id="cb83-20"><a href="other-visulization-example.html#cb83-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">#ylim(c(-0.1, 1)) + #xlim(c(2, 4)) + </span></span>
<span id="cb83-21"><a href="other-visulization-example.html#cb83-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> country_c), </span>
<span id="cb83-22"><a href="other-visulization-example.html#cb83-22" aria-hidden="true" tabindex="-1"></a>                   <span class="at">fill =</span> <span class="cn">NA</span>, <span class="co"># 투명하게 해서 겹쳐도 보이게</span></span>
<span id="cb83-23"><a href="other-visulization-example.html#cb83-23" aria-hidden="true" tabindex="-1"></a>                   <span class="at">alpha =</span><span class="dv">1</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="co"># 작게</span></span>
<span id="cb83-24"><a href="other-visulization-example.html#cb83-24" aria-hidden="true" tabindex="-1"></a>                   <span class="at">box.padding =</span> <span class="fl">0.4</span>,  <span class="co"># 분별해서</span></span>
<span id="cb83-25"><a href="other-visulization-example.html#cb83-25" aria-hidden="true" tabindex="-1"></a>                   <span class="at">segment.size =</span><span class="fl">0.1</span>,  <span class="co"># 선 </span></span>
<span id="cb83-26"><a href="other-visulization-example.html#cb83-26" aria-hidden="true" tabindex="-1"></a>                   <span class="at">force =</span> <span class="dv">2</span>)      <span class="sc">+</span>    <span class="co"># 이것은 무엇일까요?</span></span>
<span id="cb83-27"><a href="other-visulization-example.html#cb83-27" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb83-28"><a href="other-visulization-example.html#cb83-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&#39;lm&#39;</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">poly</span>(x,<span class="dv">2</span>), <span class="at">se=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb83-29"><a href="other-visulization-example.html#cb83-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_smooth( se=FALSE) +</span></span>
<span id="cb83-30"><a href="other-visulization-example.html#cb83-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(gender<span class="sc">~</span>.) <span class="sc">+</span></span>
<span id="cb83-31"><a href="other-visulization-example.html#cb83-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="testbook_files/figure-html/human%20develop%20index%20and%20economic%20loss-1.png" width="672" /></p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="other-visulization-example.html#cb84-1" aria-hidden="true" tabindex="-1"></a>mixed.lmer4 <span class="ot">=</span> <span class="fu">lmer</span>(TotalDepAnx2 <span class="sc">~</span> EcLossAllgp2 <span class="sc">+</span> age2 <span class="sc">+</span> </span>
<span id="cb84-2"><a href="other-visulization-example.html#cb84-2" aria-hidden="true" tabindex="-1"></a>                  (<span class="dv">1</span><span class="sc">|</span>country_c), <span class="at">data=</span>mm4<span class="fl">.2</span> <span class="sc">%&gt;%</span> <span class="fu">filter</span>(edugp2 <span class="sc">==</span><span class="dv">2</span>))</span>
<span id="cb84-3"><a href="other-visulization-example.html#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mixed.lmer4)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: TotalDepAnx2 ~ EcLossAllgp2 + age2 + (1 | country_c)
##    Data: mm4.2 %&gt;% filter(edugp2 == 2)
## 
## REML criterion at convergence: 12714
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -1.8649 -1.1252  0.5519  0.8157  1.4511 
## 
## Random effects:
##  Groups    Name        Variance Std.Dev.
##  country_c (Intercept) 0.01124  0.1060  
##  Residual              0.22338  0.4726  
## Number of obs: 9436, groups:  country_c, 17
## 
## Fixed effects:
##                Estimate Std. Error t value
## (Intercept)   1.6157913  0.0351975  45.906
## EcLossAllgp2  0.0874493  0.0123267   7.094
## age2         -0.0028828  0.0004268  -6.754
## 
## Correlation of Fixed Effects:
##             (Intr) EcLsA2
## EcLssAllgp2 -0.455       
## age2        -0.518  0.072</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="other-visulization-example.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co">#qqnorm(resid(mixed.lmer2))</span></span></code></pre></div>
<p>mod3 = mm4 %&gt;%
glm(family = binomial,
formula = TotalDepAnx ~ EcLossAllgp + age + gender + edugp2 +
relevel(as.factor(country_c), ref = ‘Taiwan’) )</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="other-visulization-example.html#cb87-1" aria-hidden="true" tabindex="-1"></a>mixed.lmer1 <span class="ot">=</span> <span class="fu">lmer</span>(TotalDepAnx2 <span class="sc">~</span> EcLossAllgp2 <span class="sc">+</span> age <span class="sc">+</span> edugp <span class="sc">+</span> gender<span class="sc">+</span> </span>
<span id="cb87-2"><a href="other-visulization-example.html#cb87-2" aria-hidden="true" tabindex="-1"></a>                    (<span class="dv">1</span><span class="sc">|</span>country_c2), <span class="at">data=</span>mm4<span class="fl">.2</span> <span class="sc">%&gt;%</span> <span class="fu">filter</span>(y2019 <span class="sc">&gt;</span><span class="fl">0.9</span>))</span>
<span id="cb87-3"><a href="other-visulization-example.html#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mixed.lmer1)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: TotalDepAnx2 ~ EcLossAllgp2 + age + edugp + gender + (1 | country_c2)
##    Data: mm4.2 %&gt;% filter(y2019 &gt; 0.9)
## 
## REML criterion at convergence: 6860.8
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -1.8989 -1.0078  0.5255  0.8818  1.5447 
## 
## Random effects:
##  Groups     Name        Variance Std.Dev.
##  country_c2 (Intercept) 0.01017  0.1008  
##  Residual               0.23064  0.4802  
## Number of obs: 4962, groups:  country_c2, 7
## 
## Fixed effects:
##               Estimate Std. Error t value
## (Intercept)   1.411453   0.055829  25.282
## EcLossAllgp2  0.127543   0.018872   6.758
## age          -0.002507   0.000560  -4.477
## edugp         0.014514   0.006520   2.226
## genderWomen   0.102722   0.013814   7.436
## 
## Correlation of Fixed Effects:
##             (Intr) EcLsA2 age    edugp 
## EcLssAllgp2 -0.435                     
## age         -0.513  0.107              
## edugp       -0.343 -0.006  0.090       
## genderWomen -0.194 -0.015  0.117  0.064</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="other-visulization-example.html#cb89-1" aria-hidden="true" tabindex="-1"></a>mixed.lmer2 <span class="ot">=</span> <span class="fu">lmer</span>(TotalDepAnx2 <span class="sc">~</span> EcLossAllgp2 <span class="sc">+</span> age <span class="sc">+</span> edugp <span class="sc">+</span> gender<span class="sc">+</span> </span>
<span id="cb89-2"><a href="other-visulization-example.html#cb89-2" aria-hidden="true" tabindex="-1"></a>                     (<span class="dv">1</span><span class="sc">|</span>country_c2), <span class="at">data=</span>mm4<span class="fl">.2</span> <span class="sc">%&gt;%</span> <span class="fu">filter</span>(y2019 <span class="sc">&lt;=</span><span class="fl">0.9</span> <span class="sc">&amp;</span> y2019 <span class="sc">&gt;=</span><span class="fl">0.8</span>))</span>
<span id="cb89-3"><a href="other-visulization-example.html#cb89-3" aria-hidden="true" tabindex="-1"></a>mixed.lmer3 <span class="ot">=</span> <span class="fu">lmer</span>(TotalDepAnx2 <span class="sc">~</span> EcLossAllgp2 <span class="sc">+</span> age <span class="sc">+</span> edugp <span class="sc">+</span> gender<span class="sc">+</span> </span>
<span id="cb89-4"><a href="other-visulization-example.html#cb89-4" aria-hidden="true" tabindex="-1"></a>                     (<span class="dv">1</span><span class="sc">|</span>country_c2), <span class="at">data=</span>mm4<span class="fl">.2</span> <span class="sc">%&gt;%</span> <span class="fu">filter</span>(y2019 <span class="sc">&lt;=</span><span class="fl">0.8</span>))</span>
<span id="cb89-5"><a href="other-visulization-example.html#cb89-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-6"><a href="other-visulization-example.html#cb89-6" aria-hidden="true" tabindex="-1"></a>hdi0<span class="fl">.9</span> <span class="ot">=</span> <span class="fu">summary</span>(mixed.lmer1)<span class="sc">$</span>coefficient[<span class="dv">2</span>, <span class="dv">1</span>] <span class="sc">%&gt;%</span> <span class="fu">exp</span>()</span>
<span id="cb89-7"><a href="other-visulization-example.html#cb89-7" aria-hidden="true" tabindex="-1"></a>hdi0<span class="fl">.8</span> <span class="ot">=</span> <span class="fu">summary</span>(mixed.lmer2)<span class="sc">$</span>coefficient[<span class="dv">2</span>, <span class="dv">1</span>] <span class="sc">%&gt;%</span> <span class="fu">exp</span>()</span>
<span id="cb89-8"><a href="other-visulization-example.html#cb89-8" aria-hidden="true" tabindex="-1"></a>hdi0<span class="fl">.7</span> <span class="ot">=</span> <span class="fu">summary</span>(mixed.lmer3)<span class="sc">$</span>coefficient[<span class="dv">2</span>, <span class="dv">1</span>] <span class="sc">%&gt;%</span> <span class="fu">exp</span>()</span>
<span id="cb89-9"><a href="other-visulization-example.html#cb89-9" aria-hidden="true" tabindex="-1"></a>hdi0<span class="fl">.9</span>ci <span class="ot">=</span> <span class="fu">confint</span>(mixed.lmer1)[<span class="dv">4</span>, ] <span class="sc">%&gt;%</span> <span class="fu">exp</span>()</span>
<span id="cb89-10"><a href="other-visulization-example.html#cb89-10" aria-hidden="true" tabindex="-1"></a>hdi0<span class="fl">.8</span>ci <span class="ot">=</span> <span class="fu">confint</span>(mixed.lmer2)[<span class="dv">4</span>, ] <span class="sc">%&gt;%</span> <span class="fu">exp</span>()</span>
<span id="cb89-11"><a href="other-visulization-example.html#cb89-11" aria-hidden="true" tabindex="-1"></a>hdi0<span class="fl">.7</span>ci <span class="ot">=</span> <span class="fu">confint</span>(mixed.lmer3)[<span class="dv">4</span>, ] <span class="sc">%&gt;%</span> <span class="fu">exp</span>()</span>
<span id="cb89-12"><a href="other-visulization-example.html#cb89-12" aria-hidden="true" tabindex="-1"></a>hdi0<span class="fl">.9</span>ci</span></code></pre></div>
<pre><code>##    2.5 %   97.5 % 
## 1.094813 1.178854</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="other-visulization-example.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="fu">c</span>(hdi0<span class="fl">.9</span>, hdi0<span class="fl">.9</span>ci), </span>
<span id="cb91-2"><a href="other-visulization-example.html#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(hdi0<span class="fl">.8</span>, hdi0<span class="fl">.8</span>ci), </span>
<span id="cb91-3"><a href="other-visulization-example.html#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(hdi0<span class="fl">.7</span>, hdi0<span class="fl">.7</span>ci)) <span class="sc">%&gt;%</span></span>
<span id="cb91-4"><a href="other-visulization-example.html#cb91-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&#39;OR&#39;</span>, <span class="st">&#39;LL&#39;</span>, <span class="st">&#39;UL&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb91-5"><a href="other-visulization-example.html#cb91-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">HDI =</span> <span class="fu">c</span>(<span class="st">&#39;&gt;0.9&#39;</span>, <span class="st">&#39;&gt;0.8&#39;</span>, <span class="st">&#39;&lt;0.8&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb91-6"><a href="other-visulization-example.html#cb91-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(HDI, OR, LL, UL)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   HDI      OR    LL    UL
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 &gt;0.9   1.14  1.09  1.09
## 2 &gt;0.8   1.09  1.04  1.06
## 3 &lt;0.8   1.18  1.13  1.12</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="other-visulization-example.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mixed.lmer1)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: TotalDepAnx2 ~ EcLossAllgp2 + age + edugp + gender + (1 | country_c2)
##    Data: mm4.2 %&gt;% filter(y2019 &gt; 0.9)
## 
## REML criterion at convergence: 6860.8
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -1.8989 -1.0078  0.5255  0.8818  1.5447 
## 
## Random effects:
##  Groups     Name        Variance Std.Dev.
##  country_c2 (Intercept) 0.01017  0.1008  
##  Residual               0.23064  0.4802  
## Number of obs: 4962, groups:  country_c2, 7
## 
## Fixed effects:
##               Estimate Std. Error t value
## (Intercept)   1.411453   0.055829  25.282
## EcLossAllgp2  0.127543   0.018872   6.758
## age          -0.002507   0.000560  -4.477
## edugp         0.014514   0.006520   2.226
## genderWomen   0.102722   0.013814   7.436
## 
## Correlation of Fixed Effects:
##             (Intr) EcLsA2 age    edugp 
## EcLssAllgp2 -0.435                     
## age         -0.513  0.107              
## edugp       -0.343 -0.006  0.090       
## genderWomen -0.194 -0.015  0.117  0.064</code></pre>

</div>
</div>
<div id="mixed" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> Mixed Model<a href="other-visulization-example.html#mixed" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="introduction-3" class="section level3 hasAnchor" number="12.3.1">
<h3><span class="header-section-number">12.3.1</span> introduction<a href="other-visulization-example.html#introduction-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="data-step-1-1" class="section level3 hasAnchor" number="12.3.2">
<h3><span class="header-section-number">12.3.2</span> data step 1<a href="other-visulization-example.html#data-step-1-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="load-data-of-int-and-korea-1" class="section level3 hasAnchor" number="12.3.3">
<h3><span class="header-section-number">12.3.3</span> load data of Int and Korea<a href="other-visulization-example.html#load-data-of-int-and-korea-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="data-merge-1" class="section level3 hasAnchor" number="12.3.4">
<h3><span class="header-section-number">12.3.4</span> data merge<a href="other-visulization-example.html#data-merge-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="data-analysis-start-1" class="section level3 hasAnchor" number="12.3.5">
<h3><span class="header-section-number">12.3.5</span> Data analysis start<a href="other-visulization-example.html#data-analysis-start-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="job-loss-due-to-covid19-psychological-aggravation-according-to-gender-1" class="section level4 hasAnchor" number="12.3.5.1">
<h4><span class="header-section-number">12.3.5.1</span> job loss due to COVID19, psychological aggravation according to Gender<a href="other-visulization-example.html#job-loss-due-to-covid19-psychological-aggravation-according-to-gender-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="job-loss-psychological-aggravation-according-to-age-group-1" class="section level4 hasAnchor" number="12.3.5.2">
<h4><span class="header-section-number">12.3.5.2</span> job loss, psychological aggravation according to age group<a href="other-visulization-example.html#job-loss-psychological-aggravation-according-to-age-group-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
</div>
<div id="job-loss-psychological-aggravation-according-to-education-level-1" class="section level3 hasAnchor" number="12.3.6">
<h3><span class="header-section-number">12.3.6</span> job loss, psychological aggravation according to Education level<a href="other-visulization-example.html#job-loss-psychological-aggravation-according-to-education-level-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="depression-status-according-job-loss-status-1" class="section level4 hasAnchor" number="12.3.6.1">
<h4><span class="header-section-number">12.3.6.1</span> Depression status according job loss status<a href="other-visulization-example.html#depression-status-according-job-loss-status-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
</div>
<div id="association-1" class="section level3 hasAnchor" number="12.3.7">
<h3><span class="header-section-number">12.3.7</span> association<a href="other-visulization-example.html#association-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="mixed-model-1" class="section level3 hasAnchor" number="12.3.8">
<h3><span class="header-section-number">12.3.8</span> mixed model<a href="other-visulization-example.html#mixed-model-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="mixed-model-with-human-develop-index-stratification-1" class="section level3 hasAnchor" number="12.3.9">
<h3><span class="header-section-number">12.3.9</span> mixed model with human develop index stratification<a href="other-visulization-example.html#mixed-model-with-human-develop-index-stratification-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="statistical-plot-with-ggplot2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-wrangling--reshaping.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["testbook.pdf", "testbook.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
